var Mr=Object.defineProperty;var De=Object.getOwnPropertySymbols;var Br=Object.prototype.hasOwnProperty,Dr=Object.prototype.propertyIsEnumerable;var Ue=(r,e,t)=>e in r?Mr(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,ee=(r,e)=>{for(var t in e||(e={}))Br.call(e,t)&&Ue(r,t,e[t]);if(De)for(var t of De(e))Dr.call(e,t)&&Ue(r,t,e[t]);return r};var $=typeof global!="undefined"?global:typeof self!="undefined"?self:typeof window!="undefined"?window:{},A=[],b=[],Ur=typeof Uint8Array!="undefined"?Uint8Array:Array,Re=!1;function He(){Re=!0;for(var r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",e=0,t=r.length;e<t;++e)A[e]=r[e],b[r.charCodeAt(e)]=e;b["-".charCodeAt(0)]=62,b["_".charCodeAt(0)]=63}function Or(r){Re||He();var e,t,n,i,o,f,u=r.length;if(u%4>0)throw new Error("Invalid string. Length must be a multiple of 4");o=r[u-2]==="="?2:r[u-1]==="="?1:0,f=new Ur(u*3/4-o),n=o>0?u-4:u;var s=0;for(e=0,t=0;e<n;e+=4,t+=3)i=b[r.charCodeAt(e)]<<18|b[r.charCodeAt(e+1)]<<12|b[r.charCodeAt(e+2)]<<6|b[r.charCodeAt(e+3)],f[s++]=i>>16&255,f[s++]=i>>8&255,f[s++]=i&255;return o===2?(i=b[r.charCodeAt(e)]<<2|b[r.charCodeAt(e+1)]>>4,f[s++]=i&255):o===1&&(i=b[r.charCodeAt(e)]<<10|b[r.charCodeAt(e+1)]<<4|b[r.charCodeAt(e+2)]>>2,f[s++]=i>>8&255,f[s++]=i&255),f}function qr(r){return A[r>>18&63]+A[r>>12&63]+A[r>>6&63]+A[r&63]}function Pr(r,e,t){for(var n,i=[],o=e;o<t;o+=3)n=(r[o]<<16)+(r[o+1]<<8)+r[o+2],i.push(qr(n));return i.join("")}function Oe(r){Re||He();for(var e,t=r.length,n=t%3,i="",o=[],f=16383,u=0,s=t-n;u<s;u+=f)o.push(Pr(r,u,u+f>s?s:u+f));return n===1?(e=r[t-1],i+=A[e>>2],i+=A[e<<4&63],i+="=="):n===2&&(e=(r[t-2]<<8)+r[t-1],i+=A[e>>10],i+=A[e>>4&63],i+=A[e<<2&63],i+="="),o.push(i),o.join("")}function fe(r,e,t,n,i){var o,f,u=i*8-n-1,s=(1<<u)-1,l=s>>1,h=-7,c=t?i-1:0,w=t?-1:1,p=r[e+c];for(c+=w,o=p&(1<<-h)-1,p>>=-h,h+=u;h>0;o=o*256+r[e+c],c+=w,h-=8);for(f=o&(1<<-h)-1,o>>=-h,h+=n;h>0;f=f*256+r[e+c],c+=w,h-=8);if(o===0)o=1-l;else{if(o===s)return f?NaN:(p?-1:1)*(1/0);f=f+Math.pow(2,n),o=o-l}return(p?-1:1)*f*Math.pow(2,o-n)}function Ve(r,e,t,n,i,o){var f,u,s,l=o*8-i-1,h=(1<<l)-1,c=h>>1,w=i===23?Math.pow(2,-24)-Math.pow(2,-77):0,p=n?0:o-1,x=n?1:-1,M=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(u=isNaN(e)?1:0,f=h):(f=Math.floor(Math.log(e)/Math.LN2),e*(s=Math.pow(2,-f))<1&&(f--,s*=2),f+c>=1?e+=w/s:e+=w*Math.pow(2,1-c),e*s>=2&&(f++,s/=2),f+c>=h?(u=0,f=h):f+c>=1?(u=(e*s-1)*Math.pow(2,i),f=f+c):(u=e*Math.pow(2,c-1)*Math.pow(2,i),f=0));i>=8;r[t+p]=u&255,p+=x,u/=256,i-=8);for(f=f<<i|u,l+=i;l>0;r[t+p]=f&255,p+=x,f/=256,l-=8);r[t+p-x]|=M*128}var Nr={}.toString,Ge=Array.isArray||function(r){return Nr.call(r)=="[object Array]"},kr=50;a.TYPED_ARRAY_SUPPORT=$.TYPED_ARRAY_SUPPORT!==void 0?$.TYPED_ARRAY_SUPPORT:!0;function ve(){return a.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function C(r,e){if(ve()<e)throw new RangeError("Invalid typed array length");return a.TYPED_ARRAY_SUPPORT?(r=new Uint8Array(e),r.__proto__=a.prototype):(r===null&&(r=new a(e)),r.length=e),r}function a(r,e,t){if(!a.TYPED_ARRAY_SUPPORT&&!(this instanceof a))return new a(r,e,t);if(typeof r=="number"){if(typeof e=="string")throw new Error("If encoding is specified then the first argument must be a string");return Se(this,r)}return Qe(this,r,e,t)}a.poolSize=8192;a._augment=function(r){return r.__proto__=a.prototype,r};function Qe(r,e,t,n){if(typeof e=="number")throw new TypeError('"value" argument must not be a number');return typeof ArrayBuffer!="undefined"&&e instanceof ArrayBuffer?Wr(r,e,t,n):typeof e=="string"?Yr(r,e,t):zr(r,e)}a.from=function(r,e,t){return Qe(null,r,e,t)};a.TYPED_ARRAY_SUPPORT&&(a.prototype.__proto__=Uint8Array.prototype,a.__proto__=Uint8Array);function Ze(r){if(typeof r!="number")throw new TypeError('"size" argument must be a number');if(r<0)throw new RangeError('"size" argument must not be negative')}function jr(r,e,t,n){return Ze(e),e<=0?C(r,e):t!==void 0?typeof n=="string"?C(r,e).fill(t,n):C(r,e).fill(t):C(r,e)}a.alloc=function(r,e,t){return jr(null,r,e,t)};function Se(r,e){if(Ze(e),r=C(r,e<0?0:Ae(e)|0),!a.TYPED_ARRAY_SUPPORT)for(var t=0;t<e;++t)r[t]=0;return r}a.allocUnsafe=function(r){return Se(null,r)};a.allocUnsafeSlow=function(r){return Se(null,r)};function Yr(r,e,t){if((typeof t!="string"||t==="")&&(t="utf8"),!a.isEncoding(t))throw new TypeError('"encoding" must be a valid string encoding');var n=Ke(e,t)|0;r=C(r,n);var i=r.write(e,t);return i!==n&&(r=r.slice(0,i)),r}function _e(r,e){var t=e.length<0?0:Ae(e.length)|0;r=C(r,t);for(var n=0;n<t;n+=1)r[n]=e[n]&255;return r}function Wr(r,e,t,n){if(e.byteLength,t<0||e.byteLength<t)throw new RangeError("'offset' is out of bounds");if(e.byteLength<t+(n||0))throw new RangeError("'length' is out of bounds");return t===void 0&&n===void 0?e=new Uint8Array(e):n===void 0?e=new Uint8Array(e,t):e=new Uint8Array(e,t,n),a.TYPED_ARRAY_SUPPORT?(r=e,r.__proto__=a.prototype):r=_e(r,e),r}function zr(r,e){if(T(e)){var t=Ae(e.length)|0;return r=C(r,t),r.length===0||e.copy(r,0,0,t),r}if(e){if(typeof ArrayBuffer!="undefined"&&e.buffer instanceof ArrayBuffer||"length"in e)return typeof e.length!="number"||st(e.length)?C(r,0):_e(r,e);if(e.type==="Buffer"&&Ge(e.data))return _e(r,e.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function Ae(r){if(r>=ve())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+ve().toString(16)+" bytes");return r|0}a.isBuffer=k;function T(r){return!!(r!=null&&r._isBuffer)}a.compare=function(e,t){if(!T(e)||!T(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var n=e.length,i=t.length,o=0,f=Math.min(n,i);o<f;++o)if(e[o]!==t[o]){n=e[o],i=t[o];break}return n<i?-1:i<n?1:0};a.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}};a.concat=function(e,t){if(!Ge(e))throw new TypeError('"list" argument must be an Array of Buffers');if(e.length===0)return a.alloc(0);var n;if(t===void 0)for(t=0,n=0;n<e.length;++n)t+=e[n].length;var i=a.allocUnsafe(t),o=0;for(n=0;n<e.length;++n){var f=e[n];if(!T(f))throw new TypeError('"list" argument must be an Array of Buffers');f.copy(i,o),o+=f.length}return i};function Ke(r,e){if(T(r))return r.length;if(typeof ArrayBuffer!="undefined"&&typeof ArrayBuffer.isView=="function"&&(ArrayBuffer.isView(r)||r instanceof ArrayBuffer))return r.byteLength;typeof r!="string"&&(r=""+r);var t=r.length;if(t===0)return 0;for(var n=!1;;)switch(e){case"ascii":case"latin1":case"binary":return t;case"utf8":case"utf-8":case void 0:return ne(r).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return t*2;case"hex":return t>>>1;case"base64":return fr(r).length;default:if(n)return ne(r).length;e=(""+e).toLowerCase(),n=!0}}a.byteLength=Ke;function $r(r,e,t){var n=!1;if((e===void 0||e<0)&&(e=0),e>this.length||((t===void 0||t>this.length)&&(t=this.length),t<=0)||(t>>>=0,e>>>=0,t<=e))return"";for(r||(r="utf8");;)switch(r){case"hex":return rt(this,e,t);case"utf8":case"utf-8":return rr(this,e,t);case"ascii":return Xr(this,e,t);case"latin1":case"binary":return et(this,e,t);case"base64":return Zr(this,e,t);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return tt(this,e,t);default:if(n)throw new TypeError("Unknown encoding: "+r);r=(r+"").toLowerCase(),n=!0}}a.prototype._isBuffer=!0;function N(r,e,t){var n=r[e];r[e]=r[t],r[t]=n}a.prototype.swap16=function(){var e=this.length;if(e%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)N(this,t,t+1);return this};a.prototype.swap32=function(){var e=this.length;if(e%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)N(this,t,t+3),N(this,t+1,t+2);return this};a.prototype.swap64=function(){var e=this.length;if(e%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)N(this,t,t+7),N(this,t+1,t+6),N(this,t+2,t+5),N(this,t+3,t+4);return this};a.prototype.toString=function(){var e=this.length|0;return e===0?"":arguments.length===0?rr(this,0,e):$r.apply(this,arguments)};a.prototype.equals=function(e){if(!T(e))throw new TypeError("Argument must be a Buffer");return this===e?!0:a.compare(this,e)===0};a.prototype.inspect=function(){var e="",t=kr;return this.length>0&&(e=this.toString("hex",0,t).match(/.{2}/g).join(" "),this.length>t&&(e+=" ... ")),"<Buffer "+e+">"};a.prototype.compare=function(e,t,n,i,o){if(!T(e))throw new TypeError("Argument must be a Buffer");if(t===void 0&&(t=0),n===void 0&&(n=e?e.length:0),i===void 0&&(i=0),o===void 0&&(o=this.length),t<0||n>e.length||i<0||o>this.length)throw new RangeError("out of range index");if(i>=o&&t>=n)return 0;if(i>=o)return-1;if(t>=n)return 1;if(t>>>=0,n>>>=0,i>>>=0,o>>>=0,this===e)return 0;for(var f=o-i,u=n-t,s=Math.min(f,u),l=this.slice(i,o),h=e.slice(t,n),c=0;c<s;++c)if(l[c]!==h[c]){f=l[c],u=h[c];break}return f<u?-1:u<f?1:0};function Xe(r,e,t,n,i){if(r.length===0)return-1;if(typeof t=="string"?(n=t,t=0):t>2147483647?t=2147483647:t<-2147483648&&(t=-2147483648),t=+t,isNaN(t)&&(t=i?0:r.length-1),t<0&&(t=r.length+t),t>=r.length){if(i)return-1;t=r.length-1}else if(t<0)if(i)t=0;else return-1;if(typeof e=="string"&&(e=a.from(e,n)),T(e))return e.length===0?-1:qe(r,e,t,n,i);if(typeof e=="number")return e=e&255,a.TYPED_ARRAY_SUPPORT&&typeof Uint8Array.prototype.indexOf=="function"?i?Uint8Array.prototype.indexOf.call(r,e,t):Uint8Array.prototype.lastIndexOf.call(r,e,t):qe(r,[e],t,n,i);throw new TypeError("val must be string, number or Buffer")}function qe(r,e,t,n,i){var o=1,f=r.length,u=e.length;if(n!==void 0&&(n=String(n).toLowerCase(),n==="ucs2"||n==="ucs-2"||n==="utf16le"||n==="utf-16le")){if(r.length<2||e.length<2)return-1;o=2,f/=2,u/=2,t/=2}function s(p,x){return o===1?p[x]:p.readUInt16BE(x*o)}var l;if(i){var h=-1;for(l=t;l<f;l++)if(s(r,l)===s(e,h===-1?0:l-h)){if(h===-1&&(h=l),l-h+1===u)return h*o}else h!==-1&&(l-=l-h),h=-1}else for(t+u>f&&(t=f-u),l=t;l>=0;l--){for(var c=!0,w=0;w<u;w++)if(s(r,l+w)!==s(e,w)){c=!1;break}if(c)return l}return-1}a.prototype.includes=function(e,t,n){return this.indexOf(e,t,n)!==-1};a.prototype.indexOf=function(e,t,n){return Xe(this,e,t,n,!0)};a.prototype.lastIndexOf=function(e,t,n){return Xe(this,e,t,n,!1)};function Jr(r,e,t,n){t=Number(t)||0;var i=r.length-t;n?(n=Number(n),n>i&&(n=i)):n=i;var o=e.length;if(o%2!==0)throw new TypeError("Invalid hex string");n>o/2&&(n=o/2);for(var f=0;f<n;++f){var u=parseInt(e.substr(f*2,2),16);if(isNaN(u))return f;r[t+f]=u}return f}function Hr(r,e,t,n){return ae(ne(e,r.length-t),r,t,n)}function er(r,e,t,n){return ae(ut(e),r,t,n)}function Vr(r,e,t,n){return er(r,e,t,n)}function Gr(r,e,t,n){return ae(fr(e),r,t,n)}function Qr(r,e,t,n){return ae(at(e,r.length-t),r,t,n)}a.prototype.write=function(e,t,n,i){if(t===void 0)i="utf8",n=this.length,t=0;else if(n===void 0&&typeof t=="string")i=t,n=this.length,t=0;else if(isFinite(t))t=t|0,isFinite(n)?(n=n|0,i===void 0&&(i="utf8")):(i=n,n=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var o=this.length-t;if((n===void 0||n>o)&&(n=o),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");i||(i="utf8");for(var f=!1;;)switch(i){case"hex":return Jr(this,e,t,n);case"utf8":case"utf-8":return Hr(this,e,t,n);case"ascii":return er(this,e,t,n);case"latin1":case"binary":return Vr(this,e,t,n);case"base64":return Gr(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Qr(this,e,t,n);default:if(f)throw new TypeError("Unknown encoding: "+i);i=(""+i).toLowerCase(),f=!0}};a.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function Zr(r,e,t){return e===0&&t===r.length?Oe(r):Oe(r.slice(e,t))}function rr(r,e,t){t=Math.min(r.length,t);for(var n=[],i=e;i<t;){var o=r[i],f=null,u=o>239?4:o>223?3:o>191?2:1;if(i+u<=t){var s,l,h,c;switch(u){case 1:o<128&&(f=o);break;case 2:s=r[i+1],(s&192)===128&&(c=(o&31)<<6|s&63,c>127&&(f=c));break;case 3:s=r[i+1],l=r[i+2],(s&192)===128&&(l&192)===128&&(c=(o&15)<<12|(s&63)<<6|l&63,c>2047&&(c<55296||c>57343)&&(f=c));break;case 4:s=r[i+1],l=r[i+2],h=r[i+3],(s&192)===128&&(l&192)===128&&(h&192)===128&&(c=(o&15)<<18|(s&63)<<12|(l&63)<<6|h&63,c>65535&&c<1114112&&(f=c))}}f===null?(f=65533,u=1):f>65535&&(f-=65536,n.push(f>>>10&1023|55296),f=56320|f&1023),n.push(f),i+=u}return Kr(n)}var Pe=4096;function Kr(r){var e=r.length;if(e<=Pe)return String.fromCharCode.apply(String,r);for(var t="",n=0;n<e;)t+=String.fromCharCode.apply(String,r.slice(n,n+=Pe));return t}function Xr(r,e,t){var n="";t=Math.min(r.length,t);for(var i=e;i<t;++i)n+=String.fromCharCode(r[i]&127);return n}function et(r,e,t){var n="";t=Math.min(r.length,t);for(var i=e;i<t;++i)n+=String.fromCharCode(r[i]);return n}function rt(r,e,t){var n=r.length;(!e||e<0)&&(e=0),(!t||t<0||t>n)&&(t=n);for(var i="",o=e;o<t;++o)i+=ot(r[o]);return i}function tt(r,e,t){for(var n=r.slice(e,t),i="",o=0;o<n.length;o+=2)i+=String.fromCharCode(n[o]+n[o+1]*256);return i}a.prototype.slice=function(e,t){var n=this.length;e=~~e,t=t===void 0?n:~~t,e<0?(e+=n,e<0&&(e=0)):e>n&&(e=n),t<0?(t+=n,t<0&&(t=0)):t>n&&(t=n),t<e&&(t=e);var i;if(a.TYPED_ARRAY_SUPPORT)i=this.subarray(e,t),i.__proto__=a.prototype;else{var o=t-e;i=new a(o,void 0);for(var f=0;f<o;++f)i[f]=this[f+e]}return i};function y(r,e,t){if(r%1!==0||r<0)throw new RangeError("offset is not uint");if(r+e>t)throw new RangeError("Trying to access beyond buffer length")}a.prototype.readUIntLE=function(e,t,n){e=e|0,t=t|0,n||y(e,t,this.length);for(var i=this[e],o=1,f=0;++f<t&&(o*=256);)i+=this[e+f]*o;return i};a.prototype.readUIntBE=function(e,t,n){e=e|0,t=t|0,n||y(e,t,this.length);for(var i=this[e+--t],o=1;t>0&&(o*=256);)i+=this[e+--t]*o;return i};a.prototype.readUInt8=function(e,t){return t||y(e,1,this.length),this[e]};a.prototype.readUInt16LE=function(e,t){return t||y(e,2,this.length),this[e]|this[e+1]<<8};a.prototype.readUInt16BE=function(e,t){return t||y(e,2,this.length),this[e]<<8|this[e+1]};a.prototype.readUInt32LE=function(e,t){return t||y(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+this[e+3]*16777216};a.prototype.readUInt32BE=function(e,t){return t||y(e,4,this.length),this[e]*16777216+(this[e+1]<<16|this[e+2]<<8|this[e+3])};a.prototype.readIntLE=function(e,t,n){e=e|0,t=t|0,n||y(e,t,this.length);for(var i=this[e],o=1,f=0;++f<t&&(o*=256);)i+=this[e+f]*o;return o*=128,i>=o&&(i-=Math.pow(2,8*t)),i};a.prototype.readIntBE=function(e,t,n){e=e|0,t=t|0,n||y(e,t,this.length);for(var i=t,o=1,f=this[e+--i];i>0&&(o*=256);)f+=this[e+--i]*o;return o*=128,f>=o&&(f-=Math.pow(2,8*t)),f};a.prototype.readInt8=function(e,t){return t||y(e,1,this.length),this[e]&128?(255-this[e]+1)*-1:this[e]};a.prototype.readInt16LE=function(e,t){t||y(e,2,this.length);var n=this[e]|this[e+1]<<8;return n&32768?n|4294901760:n};a.prototype.readInt16BE=function(e,t){t||y(e,2,this.length);var n=this[e+1]|this[e]<<8;return n&32768?n|4294901760:n};a.prototype.readInt32LE=function(e,t){return t||y(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24};a.prototype.readInt32BE=function(e,t){return t||y(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]};a.prototype.readFloatLE=function(e,t){return t||y(e,4,this.length),fe(this,e,!0,23,4)};a.prototype.readFloatBE=function(e,t){return t||y(e,4,this.length),fe(this,e,!1,23,4)};a.prototype.readDoubleLE=function(e,t){return t||y(e,8,this.length),fe(this,e,!0,52,8)};a.prototype.readDoubleBE=function(e,t){return t||y(e,8,this.length),fe(this,e,!1,52,8)};function _(r,e,t,n,i,o){if(!T(r))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>i||e<o)throw new RangeError('"value" argument is out of bounds');if(t+n>r.length)throw new RangeError("Index out of range")}a.prototype.writeUIntLE=function(e,t,n,i){if(e=+e,t=t|0,n=n|0,!i){var o=Math.pow(2,8*n)-1;_(this,e,t,n,o,0)}var f=1,u=0;for(this[t]=e&255;++u<n&&(f*=256);)this[t+u]=e/f&255;return t+n};a.prototype.writeUIntBE=function(e,t,n,i){if(e=+e,t=t|0,n=n|0,!i){var o=Math.pow(2,8*n)-1;_(this,e,t,n,o,0)}var f=n-1,u=1;for(this[t+f]=e&255;--f>=0&&(u*=256);)this[t+f]=e/u&255;return t+n};a.prototype.writeUInt8=function(e,t,n){return e=+e,t=t|0,n||_(this,e,t,1,255,0),a.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=e&255,t+1};function oe(r,e,t,n){e<0&&(e=65535+e+1);for(var i=0,o=Math.min(r.length-t,2);i<o;++i)r[t+i]=(e&255<<8*(n?i:1-i))>>>(n?i:1-i)*8}a.prototype.writeUInt16LE=function(e,t,n){return e=+e,t=t|0,n||_(this,e,t,2,65535,0),a.TYPED_ARRAY_SUPPORT?(this[t]=e&255,this[t+1]=e>>>8):oe(this,e,t,!0),t+2};a.prototype.writeUInt16BE=function(e,t,n){return e=+e,t=t|0,n||_(this,e,t,2,65535,0),a.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=e&255):oe(this,e,t,!1),t+2};function ue(r,e,t,n){e<0&&(e=4294967295+e+1);for(var i=0,o=Math.min(r.length-t,4);i<o;++i)r[t+i]=e>>>(n?i:3-i)*8&255}a.prototype.writeUInt32LE=function(e,t,n){return e=+e,t=t|0,n||_(this,e,t,4,4294967295,0),a.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=e&255):ue(this,e,t,!0),t+4};a.prototype.writeUInt32BE=function(e,t,n){return e=+e,t=t|0,n||_(this,e,t,4,4294967295,0),a.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=e&255):ue(this,e,t,!1),t+4};a.prototype.writeIntLE=function(e,t,n,i){if(e=+e,t=t|0,!i){var o=Math.pow(2,8*n-1);_(this,e,t,n,o-1,-o)}var f=0,u=1,s=0;for(this[t]=e&255;++f<n&&(u*=256);)e<0&&s===0&&this[t+f-1]!==0&&(s=1),this[t+f]=(e/u>>0)-s&255;return t+n};a.prototype.writeIntBE=function(e,t,n,i){if(e=+e,t=t|0,!i){var o=Math.pow(2,8*n-1);_(this,e,t,n,o-1,-o)}var f=n-1,u=1,s=0;for(this[t+f]=e&255;--f>=0&&(u*=256);)e<0&&s===0&&this[t+f+1]!==0&&(s=1),this[t+f]=(e/u>>0)-s&255;return t+n};a.prototype.writeInt8=function(e,t,n){return e=+e,t=t|0,n||_(this,e,t,1,127,-128),a.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=e&255,t+1};a.prototype.writeInt16LE=function(e,t,n){return e=+e,t=t|0,n||_(this,e,t,2,32767,-32768),a.TYPED_ARRAY_SUPPORT?(this[t]=e&255,this[t+1]=e>>>8):oe(this,e,t,!0),t+2};a.prototype.writeInt16BE=function(e,t,n){return e=+e,t=t|0,n||_(this,e,t,2,32767,-32768),a.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=e&255):oe(this,e,t,!1),t+2};a.prototype.writeInt32LE=function(e,t,n){return e=+e,t=t|0,n||_(this,e,t,4,2147483647,-2147483648),a.TYPED_ARRAY_SUPPORT?(this[t]=e&255,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):ue(this,e,t,!0),t+4};a.prototype.writeInt32BE=function(e,t,n){return e=+e,t=t|0,n||_(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),a.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=e&255):ue(this,e,t,!1),t+4};function tr(r,e,t,n,i,o){if(t+n>r.length)throw new RangeError("Index out of range");if(t<0)throw new RangeError("Index out of range")}function nr(r,e,t,n,i){return i||tr(r,e,t,4),Ve(r,e,t,n,23,4),t+4}a.prototype.writeFloatLE=function(e,t,n){return nr(this,e,t,!0,n)};a.prototype.writeFloatBE=function(e,t,n){return nr(this,e,t,!1,n)};function ir(r,e,t,n,i){return i||tr(r,e,t,8),Ve(r,e,t,n,52,8),t+8}a.prototype.writeDoubleLE=function(e,t,n){return ir(this,e,t,!0,n)};a.prototype.writeDoubleBE=function(e,t,n){return ir(this,e,t,!1,n)};a.prototype.copy=function(e,t,n,i){if(n||(n=0),!i&&i!==0&&(i=this.length),t>=e.length&&(t=e.length),t||(t=0),i>0&&i<n&&(i=n),i===n||e.length===0||this.length===0)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(i<0)throw new RangeError("sourceEnd out of bounds");i>this.length&&(i=this.length),e.length-t<i-n&&(i=e.length-t+n);var o=i-n,f;if(this===e&&n<t&&t<i)for(f=o-1;f>=0;--f)e[f+t]=this[f+n];else if(o<1e3||!a.TYPED_ARRAY_SUPPORT)for(f=0;f<o;++f)e[f+t]=this[f+n];else Uint8Array.prototype.set.call(e,this.subarray(n,n+o),t);return o};a.prototype.fill=function(e,t,n,i){if(typeof e=="string"){if(typeof t=="string"?(i=t,t=0,n=this.length):typeof n=="string"&&(i=n,n=this.length),e.length===1){var o=e.charCodeAt(0);o<256&&(e=o)}if(i!==void 0&&typeof i!="string")throw new TypeError("encoding must be a string");if(typeof i=="string"&&!a.isEncoding(i))throw new TypeError("Unknown encoding: "+i)}else typeof e=="number"&&(e=e&255);if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;t=t>>>0,n=n===void 0?this.length:n>>>0,e||(e=0);var f;if(typeof e=="number")for(f=t;f<n;++f)this[f]=e;else{var u=T(e)?e:ne(new a(e,i).toString()),s=u.length;for(f=0;f<n-t;++f)this[f+t]=u[f%s]}return this};var nt=/[^+\/0-9A-Za-z-_]/g;function it(r){if(r=ft(r).replace(nt,""),r.length<2)return"";for(;r.length%4!==0;)r=r+"=";return r}function ft(r){return r.trim?r.trim():r.replace(/^\s+|\s+$/g,"")}function ot(r){return r<16?"0"+r.toString(16):r.toString(16)}function ne(r,e){e=e||1/0;for(var t,n=r.length,i=null,o=[],f=0;f<n;++f){if(t=r.charCodeAt(f),t>55295&&t<57344){if(!i){if(t>56319){(e-=3)>-1&&o.push(239,191,189);continue}else if(f+1===n){(e-=3)>-1&&o.push(239,191,189);continue}i=t;continue}if(t<56320){(e-=3)>-1&&o.push(239,191,189),i=t;continue}t=(i-55296<<10|t-56320)+65536}else i&&(e-=3)>-1&&o.push(239,191,189);if(i=null,t<128){if((e-=1)<0)break;o.push(t)}else if(t<2048){if((e-=2)<0)break;o.push(t>>6|192,t&63|128)}else if(t<65536){if((e-=3)<0)break;o.push(t>>12|224,t>>6&63|128,t&63|128)}else if(t<1114112){if((e-=4)<0)break;o.push(t>>18|240,t>>12&63|128,t>>6&63|128,t&63|128)}else throw new Error("Invalid code point")}return o}function ut(r){for(var e=[],t=0;t<r.length;++t)e.push(r.charCodeAt(t)&255);return e}function at(r,e){for(var t,n,i,o=[],f=0;f<r.length&&!((e-=2)<0);++f)t=r.charCodeAt(f),n=t>>8,i=t%256,o.push(i),o.push(n);return o}function fr(r){return Or(it(r))}function ae(r,e,t,n){for(var i=0;i<n&&!(i+t>=e.length||i>=r.length);++i)e[i+t]=r[i];return i}function st(r){return r!==r}function k(r){return r!=null&&(!!r._isBuffer||or(r)||lt(r))}function or(r){return!!r.constructor&&typeof r.constructor.isBuffer=="function"&&r.constructor.isBuffer(r)}function lt(r){return typeof r.readFloatLE=="function"&&typeof r.slice=="function"&&or(r.slice(0,0))}var ht;function O(){}O.prototype=Object.create(null);function d(){d.init.call(this)}d.EventEmitter=d;d.usingDomains=!1;d.prototype.domain=void 0;d.prototype._events=void 0;d.prototype._maxListeners=void 0;d.defaultMaxListeners=10;d.init=function(){this.domain=null,d.usingDomains&&ht.active,(!this._events||this._events===Object.getPrototypeOf(this)._events)&&(this._events=new O,this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};d.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||isNaN(e))throw new TypeError('"n" argument must be a positive number');return this._maxListeners=e,this};function ur(r){return r._maxListeners===void 0?d.defaultMaxListeners:r._maxListeners}d.prototype.getMaxListeners=function(){return ur(this)};function ct(r,e,t){if(e)r.call(t);else for(var n=r.length,i=Q(r,n),o=0;o<n;++o)i[o].call(t)}function dt(r,e,t,n){if(e)r.call(t,n);else for(var i=r.length,o=Q(r,i),f=0;f<i;++f)o[f].call(t,n)}function pt(r,e,t,n,i){if(e)r.call(t,n,i);else for(var o=r.length,f=Q(r,o),u=0;u<o;++u)f[u].call(t,n,i)}function gt(r,e,t,n,i,o){if(e)r.call(t,n,i,o);else for(var f=r.length,u=Q(r,f),s=0;s<f;++s)u[s].call(t,n,i,o)}function wt(r,e,t,n){if(e)r.apply(t,n);else for(var i=r.length,o=Q(r,i),f=0;f<i;++f)o[f].apply(t,n)}d.prototype.emit=function(e){var t,n,i,o,f,u,s,l=e==="error";if(u=this._events,u)l=l&&u.error==null;else if(!l)return!1;if(s=this.domain,l){if(t=arguments[1],s)t||(t=new Error('Uncaught, unspecified "error" event')),t.domainEmitter=this,t.domain=s,t.domainThrown=!1,s.emit("error",t);else{if(t instanceof Error)throw t;var h=new Error('Uncaught, unspecified "error" event. ('+t+")");throw h.context=t,h}return!1}if(n=u[e],!n)return!1;var c=typeof n=="function";switch(i=arguments.length,i){case 1:ct(n,c,this);break;case 2:dt(n,c,this,arguments[1]);break;case 3:pt(n,c,this,arguments[1],arguments[2]);break;case 4:gt(n,c,this,arguments[1],arguments[2],arguments[3]);break;default:for(o=new Array(i-1),f=1;f<i;f++)o[f-1]=arguments[f];wt(n,c,this,o)}return!0};function ar(r,e,t,n){var i,o,f;if(typeof t!="function")throw new TypeError('"listener" argument must be a function');if(o=r._events,o?(o.newListener&&(r.emit("newListener",e,t.listener?t.listener:t),o=r._events),f=o[e]):(o=r._events=new O,r._eventsCount=0),!f)f=o[e]=t,++r._eventsCount;else if(typeof f=="function"?f=o[e]=n?[t,f]:[f,t]:n?f.unshift(t):f.push(t),!f.warned&&(i=ur(r),i&&i>0&&f.length>i)){f.warned=!0;var u=new Error("Possible EventEmitter memory leak detected. "+f.length+" "+e+" listeners added. Use emitter.setMaxListeners() to increase limit");u.name="MaxListenersExceededWarning",u.emitter=r,u.type=e,u.count=f.length,mt(u)}return r}function mt(r){typeof console.warn=="function"?console.warn(r):console.log(r)}d.prototype.addListener=function(e,t){return ar(this,e,t,!1)};d.prototype.on=d.prototype.addListener;d.prototype.prependListener=function(e,t){return ar(this,e,t,!0)};function sr(r,e,t){var n=!1;function i(){r.removeListener(e,i),n||(n=!0,t.apply(r,arguments))}return i.listener=t,i}d.prototype.once=function(e,t){if(typeof t!="function")throw new TypeError('"listener" argument must be a function');return this.on(e,sr(this,e,t)),this};d.prototype.prependOnceListener=function(e,t){if(typeof t!="function")throw new TypeError('"listener" argument must be a function');return this.prependListener(e,sr(this,e,t)),this};d.prototype.removeListener=function(e,t){var n,i,o,f,u;if(typeof t!="function")throw new TypeError('"listener" argument must be a function');if(i=this._events,!i)return this;if(n=i[e],!n)return this;if(n===t||n.listener&&n.listener===t)--this._eventsCount===0?this._events=new O:(delete i[e],i.removeListener&&this.emit("removeListener",e,n.listener||t));else if(typeof n!="function"){for(o=-1,f=n.length;f-- >0;)if(n[f]===t||n[f].listener&&n[f].listener===t){u=n[f].listener,o=f;break}if(o<0)return this;if(n.length===1){if(n[0]=void 0,--this._eventsCount===0)return this._events=new O,this;delete i[e]}else yt(n,o);i.removeListener&&this.emit("removeListener",e,u||t)}return this};d.prototype.removeAllListeners=function(e){var t,n;if(n=this._events,!n)return this;if(!n.removeListener)return arguments.length===0?(this._events=new O,this._eventsCount=0):n[e]&&(--this._eventsCount===0?this._events=new O:delete n[e]),this;if(arguments.length===0){for(var i=Object.keys(n),o=0,f;o<i.length;++o)f=i[o],f!=="removeListener"&&this.removeAllListeners(f);return this.removeAllListeners("removeListener"),this._events=new O,this._eventsCount=0,this}if(t=n[e],typeof t=="function")this.removeListener(e,t);else if(t)do this.removeListener(e,t[t.length-1]);while(t[0]);return this};d.prototype.listeners=function(e){var t,n,i=this._events;return i?(t=i[e],t?typeof t=="function"?n=[t.listener||t]:n=vt(t):n=[]):n=[],n};d.listenerCount=function(r,e){return typeof r.listenerCount=="function"?r.listenerCount(e):lr.call(r,e)};d.prototype.listenerCount=lr;function lr(r){var e=this._events;if(e){var t=e[r];if(typeof t=="function")return 1;if(t)return t.length}return 0}d.prototype.eventNames=function(){return this._eventsCount>0?Reflect.ownKeys(this._events):[]};function yt(r,e){for(var t=e,n=t+1,i=r.length;n<i;t+=1,n+=1)r[t]=r[n];r.pop()}function Q(r,e){for(var t=new Array(e);e--;)t[e]=r[e];return t}function vt(r){for(var e=new Array(r.length),t=0;t<e.length;++t)e[t]=r[t].listener||r[t];return e}function hr(){throw new Error("setTimeout has not been defined")}function cr(){throw new Error("clearTimeout has not been defined")}var B=hr,D=cr;typeof $.setTimeout=="function"&&(B=setTimeout);typeof $.clearTimeout=="function"&&(D=clearTimeout);function dr(r){if(B===setTimeout)return setTimeout(r,0);if((B===hr||!B)&&setTimeout)return B=setTimeout,setTimeout(r,0);try{return B(r,0)}catch{try{return B.call(null,r,0)}catch{return B.call(this,r,0)}}}function _t(r){if(D===clearTimeout)return clearTimeout(r);if((D===cr||!D)&&clearTimeout)return D=clearTimeout,clearTimeout(r);try{return D(r)}catch{try{return D.call(null,r)}catch{return D.call(this,r)}}}var I=[],z=!1,j,te=-1;function xt(){!z||!j||(z=!1,j.length?I=j.concat(I):te=-1,I.length&&pr())}function pr(){if(!z){var r=dr(xt);z=!0;for(var e=I.length;e;){for(j=I,I=[];++te<e;)j&&j[te].run();te=-1,e=I.length}j=null,z=!1,_t(r)}}function R(r){var e=new Array(arguments.length-1);if(arguments.length>1)for(var t=1;t<arguments.length;t++)e[t-1]=arguments[t];I.push(new gr(r,e)),I.length===1&&!z&&dr(pr)}function gr(r,e){this.fun=r,this.array=e}gr.prototype.run=function(){this.fun.apply(null,this.array)};var H=$.performance||{};H.now||H.mozNow||H.msNow||H.oNow||H.webkitNow;var xe;typeof Object.create=="function"?xe=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:xe=function(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e};var J=xe,bt=/%[sdj%]/g;function Et(r){if(!Fe(r)){for(var e=[],t=0;t<arguments.length;t++)e.push(q(arguments[t]));return e.join(" ")}for(var t=1,n=arguments,i=n.length,o=String(r).replace(bt,function(u){if(u==="%%")return"%";if(t>=i)return u;switch(u){case"%s":return String(n[t++]);case"%d":return Number(n[t++]);case"%j":try{return JSON.stringify(n[t++])}catch{return"[Circular]"}default:return u}}),f=n[t];t<i;f=n[++t])Te(f)||!Z(f)?o+=" "+f:o+=" "+q(f);return o}function wr(r,e){if(U($.process))return function(){return wr(r,e).apply(this,arguments)};var t=!1;function n(){return t||(console.error(e),t=!0),r.apply(this,arguments)}return n}var re={},he;function Rt(r){if(U(he)&&(he=""),r=r.toUpperCase(),!re[r])if(new RegExp("\\b"+r+"\\b","i").test(he)){var e=0;re[r]=function(){var t=Et.apply(null,arguments);console.error("%s %d: %s",r,e,t)}}else re[r]=function(){};return re[r]}function q(r,e){var t={seen:[],stylize:At};return arguments.length>=3&&(t.depth=arguments[2]),arguments.length>=4&&(t.colors=arguments[3]),mr(e)?t.showHidden=e:e&&Bt(t,e),U(t.showHidden)&&(t.showHidden=!1),U(t.depth)&&(t.depth=2),U(t.colors)&&(t.colors=!1),U(t.customInspect)&&(t.customInspect=!0),t.colors&&(t.stylize=St),ie(t,r,t.depth)}q.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]};q.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};function St(r,e){var t=q.styles[e];return t?"\x1B["+q.colors[t][0]+"m"+r+"\x1B["+q.colors[t][1]+"m":r}function At(r,e){return r}function Tt(r){var e={};return r.forEach(function(t,n){e[t]=!0}),e}function ie(r,e,t){if(r.customInspect&&e&&ge(e.inspect)&&e.inspect!==q&&!(e.constructor&&e.constructor.prototype===e)){var n=e.inspect(t,r);return Fe(n)||(n=ie(r,n,t)),n}var i=Ft(r,e);if(i)return i;var o=Object.keys(e),f=Tt(o);if(r.showHidden&&(o=Object.getOwnPropertyNames(e)),pe(e)&&(o.indexOf("message")>=0||o.indexOf("description")>=0))return ce(e);if(o.length===0){if(ge(e)){var u=e.name?": "+e.name:"";return r.stylize("[Function"+u+"]","special")}if(de(e))return r.stylize(RegExp.prototype.toString.call(e),"regexp");if(Ne(e))return r.stylize(Date.prototype.toString.call(e),"date");if(pe(e))return ce(e)}var s="",l=!1,h=["{","}"];if(Lt(e)&&(l=!0,h=["[","]"]),ge(e)){var c=e.name?": "+e.name:"";s=" [Function"+c+"]"}if(de(e)&&(s=" "+RegExp.prototype.toString.call(e)),Ne(e)&&(s=" "+Date.prototype.toUTCString.call(e)),pe(e)&&(s=" "+ce(e)),o.length===0&&(!l||e.length==0))return h[0]+s+h[1];if(t<0)return de(e)?r.stylize(RegExp.prototype.toString.call(e),"regexp"):r.stylize("[Object]","special");r.seen.push(e);var w;return l?w=Ct(r,e,t,f,o):w=o.map(function(p){return be(r,e,t,f,p,l)}),r.seen.pop(),It(w,s,h)}function Ft(r,e){if(U(e))return r.stylize("undefined","undefined");if(Fe(e)){var t="'"+JSON.stringify(e).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return r.stylize(t,"string")}if(Mt(e))return r.stylize(""+e,"number");if(mr(e))return r.stylize(""+e,"boolean");if(Te(e))return r.stylize("null","null")}function ce(r){return"["+Error.prototype.toString.call(r)+"]"}function Ct(r,e,t,n,i){for(var o=[],f=0,u=e.length;f<u;++f)yr(e,String(f))?o.push(be(r,e,t,n,String(f),!0)):o.push("");return i.forEach(function(s){s.match(/^\d+$/)||o.push(be(r,e,t,n,s,!0))}),o}function be(r,e,t,n,i,o){var f,u,s;if(s=Object.getOwnPropertyDescriptor(e,i)||{value:e[i]},s.get?s.set?u=r.stylize("[Getter/Setter]","special"):u=r.stylize("[Getter]","special"):s.set&&(u=r.stylize("[Setter]","special")),yr(n,i)||(f="["+i+"]"),u||(r.seen.indexOf(s.value)<0?(Te(t)?u=ie(r,s.value,null):u=ie(r,s.value,t-1),u.indexOf(`
`)>-1&&(o?u=u.split(`
`).map(function(l){return"  "+l}).join(`
`).substr(2):u=`
`+u.split(`
`).map(function(l){return"   "+l}).join(`
`))):u=r.stylize("[Circular]","special")),U(f)){if(o&&i.match(/^\d+$/))return u;f=JSON.stringify(""+i),f.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(f=f.substr(1,f.length-2),f=r.stylize(f,"name")):(f=f.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),f=r.stylize(f,"string"))}return f+": "+u}function It(r,e,t){var n=r.reduce(function(i,o){return o.indexOf(`
`)>=0,i+o.replace(/\u001b\[\d\d?m/g,"").length+1},0);return n>60?t[0]+(e===""?"":e+`
 `)+" "+r.join(`,
  `)+" "+t[1]:t[0]+e+" "+r.join(", ")+" "+t[1]}function Lt(r){return Array.isArray(r)}function mr(r){return typeof r=="boolean"}function Te(r){return r===null}function Mt(r){return typeof r=="number"}function Fe(r){return typeof r=="string"}function U(r){return r===void 0}function de(r){return Z(r)&&Ce(r)==="[object RegExp]"}function Z(r){return typeof r=="object"&&r!==null}function Ne(r){return Z(r)&&Ce(r)==="[object Date]"}function pe(r){return Z(r)&&(Ce(r)==="[object Error]"||r instanceof Error)}function ge(r){return typeof r=="function"}function Ce(r){return Object.prototype.toString.call(r)}function Bt(r,e){if(!e||!Z(e))return r;for(var t=Object.keys(e),n=t.length;n--;)r[t[n]]=e[t[n]];return r}function yr(r,e){return Object.prototype.hasOwnProperty.call(r,e)}function Y(){this.head=null,this.tail=null,this.length=0}Y.prototype.push=function(r){var e={data:r,next:null};this.length>0?this.tail.next=e:this.head=e,this.tail=e,++this.length};Y.prototype.unshift=function(r){var e={data:r,next:this.head};this.length===0&&(this.tail=e),this.head=e,++this.length};Y.prototype.shift=function(){if(this.length!==0){var r=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,r}};Y.prototype.clear=function(){this.head=this.tail=null,this.length=0};Y.prototype.join=function(r){if(this.length===0)return"";for(var e=this.head,t=""+e.data;e=e.next;)t+=r+e.data;return t};Y.prototype.concat=function(r){if(this.length===0)return a.alloc(0);if(this.length===1)return this.head.data;for(var e=a.allocUnsafe(r>>>0),t=this.head,n=0;t;)t.data.copy(e,n),n+=t.data.length,t=t.next;return e};var Dt=a.isEncoding||function(r){switch(r&&r.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function Ut(r){if(r&&!Dt(r))throw new Error("Unknown encoding: "+r)}function K(r){switch(this.encoding=(r||"utf8").toLowerCase().replace(/[-_]/,""),Ut(r),this.encoding){case"utf8":this.surrogateSize=3;break;case"ucs2":case"utf16le":this.surrogateSize=2,this.detectIncompleteChar=qt;break;case"base64":this.surrogateSize=3,this.detectIncompleteChar=Pt;break;default:this.write=Ot;return}this.charBuffer=new a(6),this.charReceived=0,this.charLength=0}K.prototype.write=function(r){for(var e="";this.charLength;){var t=r.length>=this.charLength-this.charReceived?this.charLength-this.charReceived:r.length;if(r.copy(this.charBuffer,this.charReceived,0,t),this.charReceived+=t,this.charReceived<this.charLength)return"";r=r.slice(t,r.length),e=this.charBuffer.slice(0,this.charLength).toString(this.encoding);var i=e.charCodeAt(e.length-1);if(i>=55296&&i<=56319){this.charLength+=this.surrogateSize,e="";continue}if(this.charReceived=this.charLength=0,r.length===0)return e;break}this.detectIncompleteChar(r);var n=r.length;this.charLength&&(r.copy(this.charBuffer,0,r.length-this.charReceived,n),n-=this.charReceived),e+=r.toString(this.encoding,0,n);var n=e.length-1,i=e.charCodeAt(n);if(i>=55296&&i<=56319){var o=this.surrogateSize;return this.charLength+=o,this.charReceived+=o,this.charBuffer.copy(this.charBuffer,o,0,o),r.copy(this.charBuffer,0,0,o),e.substring(0,n)}return e};K.prototype.detectIncompleteChar=function(r){for(var e=r.length>=3?3:r.length;e>0;e--){var t=r[r.length-e];if(e==1&&t>>5==6){this.charLength=2;break}if(e<=2&&t>>4==14){this.charLength=3;break}if(e<=3&&t>>3==30){this.charLength=4;break}}this.charReceived=e};K.prototype.end=function(r){var e="";if(r&&r.length&&(e=this.write(r)),this.charReceived){var t=this.charReceived,n=this.charBuffer,i=this.encoding;e+=n.slice(0,t).toString(i)}return e};function Ot(r){return r.toString(this.encoding)}function qt(r){this.charReceived=r.length%2,this.charLength=this.charReceived?2:0}function Pt(r){this.charReceived=r.length%3,this.charLength=this.charReceived?3:0}m.ReadableState=vr;var g=Rt("stream");J(m,d);function Nt(r,e,t){if(typeof r.prependListener=="function")return r.prependListener(e,t);!r._events||!r._events[e]?r.on(e,t):Array.isArray(r._events[e])?r._events[e].unshift(t):r._events[e]=[t,r._events[e]]}function kt(r,e){return r.listeners(e).length}function vr(r,e){r=r||{},this.objectMode=!!r.objectMode,e instanceof E&&(this.objectMode=this.objectMode||!!r.readableObjectMode);var t=r.highWaterMark,n=this.objectMode?16:16*1024;this.highWaterMark=t||t===0?t:n,this.highWaterMark=~~this.highWaterMark,this.buffer=new Y,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.defaultEncoding=r.defaultEncoding||"utf8",this.ranOut=!1,this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,r.encoding&&(this.decoder=new K(r.encoding),this.encoding=r.encoding)}function m(r){if(!(this instanceof m))return new m(r);this._readableState=new vr(r,this),this.readable=!0,r&&typeof r.read=="function"&&(this._read=r.read),d.call(this)}m.prototype.push=function(r,e){var t=this._readableState;return!t.objectMode&&typeof r=="string"&&(e=e||t.defaultEncoding,e!==t.encoding&&(r=a.from(r,e),e="")),_r(this,t,r,e,!1)};m.prototype.unshift=function(r){var e=this._readableState;return _r(this,e,r,"",!0)};m.prototype.isPaused=function(){return this._readableState.flowing===!1};function _r(r,e,t,n,i){var o=Wt(e,t);if(o)r.emit("error",o);else if(t===null)e.reading=!1,zt(r,e);else if(e.objectMode||t&&t.length>0)if(e.ended&&!i){var f=new Error("stream.push() after EOF");r.emit("error",f)}else if(e.endEmitted&&i){var u=new Error("stream.unshift() after end event");r.emit("error",u)}else{var s;e.decoder&&!i&&!n&&(t=e.decoder.write(t),s=!e.objectMode&&t.length===0),i||(e.reading=!1),s||(e.flowing&&e.length===0&&!e.sync?(r.emit("data",t),r.read(0)):(e.length+=e.objectMode?1:t.length,i?e.buffer.unshift(t):e.buffer.push(t),e.needReadable&&se(r))),$t(r,e)}else i||(e.reading=!1);return jt(e)}function jt(r){return!r.ended&&(r.needReadable||r.length<r.highWaterMark||r.length===0)}m.prototype.setEncoding=function(r){return this._readableState.decoder=new K(r),this._readableState.encoding=r,this};var ke=8388608;function Yt(r){return r>=ke?r=ke:(r--,r|=r>>>1,r|=r>>>2,r|=r>>>4,r|=r>>>8,r|=r>>>16,r++),r}function je(r,e){return r<=0||e.length===0&&e.ended?0:e.objectMode?1:r!==r?e.flowing&&e.length?e.buffer.head.data.length:e.length:(r>e.highWaterMark&&(e.highWaterMark=Yt(r)),r<=e.length?r:e.ended?e.length:(e.needReadable=!0,0))}m.prototype.read=function(r){g("read",r),r=parseInt(r,10);var e=this._readableState,t=r;if(r!==0&&(e.emittedReadable=!1),r===0&&e.needReadable&&(e.length>=e.highWaterMark||e.ended))return g("read: emitReadable",e.length,e.ended),e.length===0&&e.ended?we(this):se(this),null;if(r=je(r,e),r===0&&e.ended)return e.length===0&&we(this),null;var n=e.needReadable;g("need readable",n),(e.length===0||e.length-r<e.highWaterMark)&&(n=!0,g("length less than watermark",n)),e.ended||e.reading?(n=!1,g("reading or ended",n)):n&&(g("do read"),e.reading=!0,e.sync=!0,e.length===0&&(e.needReadable=!0),this._read(e.highWaterMark),e.sync=!1,e.reading||(r=je(t,e)));var i;return r>0?i=xr(r,e):i=null,i===null?(e.needReadable=!0,r=0):e.length-=r,e.length===0&&(e.ended||(e.needReadable=!0),t!==r&&e.ended&&we(this)),i!==null&&this.emit("data",i),i};function Wt(r,e){var t=null;return!k(e)&&typeof e!="string"&&e!==null&&e!==void 0&&!r.objectMode&&(t=new TypeError("Invalid non-string/buffer chunk")),t}function zt(r,e){if(!e.ended){if(e.decoder){var t=e.decoder.end();t&&t.length&&(e.buffer.push(t),e.length+=e.objectMode?1:t.length)}e.ended=!0,se(r)}}function se(r){var e=r._readableState;e.needReadable=!1,e.emittedReadable||(g("emitReadable",e.flowing),e.emittedReadable=!0,e.sync?R(Ye,r):Ye(r))}function Ye(r){g("emit readable"),r.emit("readable"),Ie(r)}function $t(r,e){e.readingMore||(e.readingMore=!0,R(Jt,r,e))}function Jt(r,e){for(var t=e.length;!e.reading&&!e.flowing&&!e.ended&&e.length<e.highWaterMark&&(g("maybeReadMore read 0"),r.read(0),t!==e.length);)t=e.length;e.readingMore=!1}m.prototype._read=function(r){this.emit("error",new Error("not implemented"))};m.prototype.pipe=function(r,e){var t=this,n=this._readableState;switch(n.pipesCount){case 0:n.pipes=r;break;case 1:n.pipes=[n.pipes,r];break;default:n.pipes.push(r);break}n.pipesCount+=1,g("pipe count=%d opts=%j",n.pipesCount,e);var i=!e||e.end!==!1,o=i?u:h;n.endEmitted?R(o):t.once("end",o),r.on("unpipe",f);function f(F){g("onunpipe"),F===t&&h()}function u(){g("onend"),r.end()}var s=Ht(t);r.on("drain",s);var l=!1;function h(){g("cleanup"),r.removeListener("close",x),r.removeListener("finish",M),r.removeListener("drain",s),r.removeListener("error",p),r.removeListener("unpipe",f),t.removeListener("end",u),t.removeListener("end",h),t.removeListener("data",w),l=!0,n.awaitDrain&&(!r._writableState||r._writableState.needDrain)&&s()}var c=!1;t.on("data",w);function w(F){g("ondata"),c=!1;var le=r.write(F);le===!1&&!c&&((n.pipesCount===1&&n.pipes===r||n.pipesCount>1&&br(n.pipes,r)!==-1)&&!l&&(g("false write response, pause",t._readableState.awaitDrain),t._readableState.awaitDrain++,c=!0),t.pause())}function p(F){g("onerror",F),W(),r.removeListener("error",p),kt(r,"error")===0&&r.emit("error",F)}Nt(r,"error",p);function x(){r.removeListener("finish",M),W()}r.once("close",x);function M(){g("onfinish"),r.removeListener("close",x),W()}r.once("finish",M);function W(){g("unpipe"),t.unpipe(r)}return r.emit("pipe",t),n.flowing||(g("pipe resume"),t.resume()),r};function Ht(r){return function(){var e=r._readableState;g("pipeOnDrain",e.awaitDrain),e.awaitDrain&&e.awaitDrain--,e.awaitDrain===0&&r.listeners("data").length&&(e.flowing=!0,Ie(r))}}m.prototype.unpipe=function(r){var e=this._readableState;if(e.pipesCount===0)return this;if(e.pipesCount===1)return r&&r!==e.pipes?this:(r||(r=e.pipes),e.pipes=null,e.pipesCount=0,e.flowing=!1,r&&r.emit("unpipe",this),this);if(!r){var t=e.pipes,n=e.pipesCount;e.pipes=null,e.pipesCount=0,e.flowing=!1;for(var i=0;i<n;i++)t[i].emit("unpipe",this);return this}var o=br(e.pipes,r);return o===-1?this:(e.pipes.splice(o,1),e.pipesCount-=1,e.pipesCount===1&&(e.pipes=e.pipes[0]),r.emit("unpipe",this),this)};m.prototype.on=function(r,e){var t=d.prototype.on.call(this,r,e);if(r==="data")this._readableState.flowing!==!1&&this.resume();else if(r==="readable"){var n=this._readableState;!n.endEmitted&&!n.readableListening&&(n.readableListening=n.needReadable=!0,n.emittedReadable=!1,n.reading?n.length&&se(this):R(Vt,this))}return t};m.prototype.addListener=m.prototype.on;function Vt(r){g("readable nexttick read 0"),r.read(0)}m.prototype.resume=function(){var r=this._readableState;return r.flowing||(g("resume"),r.flowing=!0,Gt(this,r)),this};function Gt(r,e){e.resumeScheduled||(e.resumeScheduled=!0,R(Qt,r,e))}function Qt(r,e){e.reading||(g("resume read 0"),r.read(0)),e.resumeScheduled=!1,e.awaitDrain=0,r.emit("resume"),Ie(r),e.flowing&&!e.reading&&r.read(0)}m.prototype.pause=function(){return g("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(g("pause"),this._readableState.flowing=!1,this.emit("pause")),this};function Ie(r){var e=r._readableState;for(g("flow",e.flowing);e.flowing&&r.read()!==null;);}m.prototype.wrap=function(r){var e=this._readableState,t=!1,n=this;r.on("end",function(){if(g("wrapped end"),e.decoder&&!e.ended){var f=e.decoder.end();f&&f.length&&n.push(f)}n.push(null)}),r.on("data",function(f){if(g("wrapped data"),e.decoder&&(f=e.decoder.write(f)),!(e.objectMode&&f==null)&&!(!e.objectMode&&(!f||!f.length))){var u=n.push(f);u||(t=!0,r.pause())}});for(var i in r)this[i]===void 0&&typeof r[i]=="function"&&(this[i]=function(f){return function(){return r[f].apply(r,arguments)}}(i));var o=["error","close","destroy","pause","resume"];return rn(o,function(f){r.on(f,n.emit.bind(n,f))}),n._read=function(f){g("wrapped _read",f),t&&(t=!1,r.resume())},n};m._fromList=xr;function xr(r,e){if(e.length===0)return null;var t;return e.objectMode?t=e.buffer.shift():!r||r>=e.length?(e.decoder?t=e.buffer.join(""):e.buffer.length===1?t=e.buffer.head.data:t=e.buffer.concat(e.length),e.buffer.clear()):t=Zt(r,e.buffer,e.decoder),t}function Zt(r,e,t){var n;return r<e.head.data.length?(n=e.head.data.slice(0,r),e.head.data=e.head.data.slice(r)):r===e.head.data.length?n=e.shift():n=t?Kt(r,e):Xt(r,e),n}function Kt(r,e){var t=e.head,n=1,i=t.data;for(r-=i.length;t=t.next;){var o=t.data,f=r>o.length?o.length:r;if(f===o.length?i+=o:i+=o.slice(0,r),r-=f,r===0){f===o.length?(++n,t.next?e.head=t.next:e.head=e.tail=null):(e.head=t,t.data=o.slice(f));break}++n}return e.length-=n,i}function Xt(r,e){var t=a.allocUnsafe(r),n=e.head,i=1;for(n.data.copy(t),r-=n.data.length;n=n.next;){var o=n.data,f=r>o.length?o.length:r;if(o.copy(t,t.length-r,0,f),r-=f,r===0){f===o.length?(++i,n.next?e.head=n.next:e.head=e.tail=null):(e.head=n,n.data=o.slice(f));break}++i}return e.length-=i,t}function we(r){var e=r._readableState;if(e.length>0)throw new Error('"endReadable()" called on non-empty stream');e.endEmitted||(e.ended=!0,R(en,e,r))}function en(r,e){!r.endEmitted&&r.length===0&&(r.endEmitted=!0,e.readable=!1,e.emit("end"))}function rn(r,e){for(var t=0,n=r.length;t<n;t++)e(r[t],t)}function br(r,e){for(var t=0,n=r.length;t<n;t++)if(r[t]===e)return t;return-1}v.WritableState=Le;J(v,d);function tn(){}function nn(r,e,t){this.chunk=r,this.encoding=e,this.callback=t,this.next=null}function Le(r,e){Object.defineProperty(this,"buffer",{get:wr(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.")}),r=r||{},this.objectMode=!!r.objectMode,e instanceof E&&(this.objectMode=this.objectMode||!!r.writableObjectMode);var t=r.highWaterMark,n=this.objectMode?16:16*1024;this.highWaterMark=t||t===0?t:n,this.highWaterMark=~~this.highWaterMark,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1;var i=r.decodeStrings===!1;this.decodeStrings=!i,this.defaultEncoding=r.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(o){hn(e,o)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new Ar(this)}Le.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t};function v(r){if(!(this instanceof v)&&!(this instanceof E))return new v(r);this._writableState=new Le(r,this),this.writable=!0,r&&(typeof r.write=="function"&&(this._write=r.write),typeof r.writev=="function"&&(this._writev=r.writev)),d.call(this)}v.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))};function fn(r,e){var t=new Error("write after end");r.emit("error",t),R(e,t)}function on(r,e,t,n){var i=!0,o=!1;return t===null?o=new TypeError("May not write null values to stream"):!a.isBuffer(t)&&typeof t!="string"&&t!==void 0&&!e.objectMode&&(o=new TypeError("Invalid non-string/buffer chunk")),o&&(r.emit("error",o),R(n,o),i=!1),i}v.prototype.write=function(r,e,t){var n=this._writableState,i=!1;return typeof e=="function"&&(t=e,e=null),a.isBuffer(r)?e="buffer":e||(e=n.defaultEncoding),typeof t!="function"&&(t=tn),n.ended?fn(this,t):on(this,n,r,t)&&(n.pendingcb++,i=an(this,n,r,e,t)),i};v.prototype.cork=function(){var r=this._writableState;r.corked++};v.prototype.uncork=function(){var r=this._writableState;r.corked&&(r.corked--,!r.writing&&!r.corked&&!r.finished&&!r.bufferProcessing&&r.bufferedRequest&&Er(this,r))};v.prototype.setDefaultEncoding=function(e){if(typeof e=="string"&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+e);return this._writableState.defaultEncoding=e,this};function un(r,e,t){return!r.objectMode&&r.decodeStrings!==!1&&typeof e=="string"&&(e=a.from(e,t)),e}function an(r,e,t,n,i){t=un(e,t,n),a.isBuffer(t)&&(n="buffer");var o=e.objectMode?1:t.length;e.length+=o;var f=e.length<e.highWaterMark;if(f||(e.needDrain=!0),e.writing||e.corked){var u=e.lastBufferedRequest;e.lastBufferedRequest=new nn(t,n,i),u?u.next=e.lastBufferedRequest:e.bufferedRequest=e.lastBufferedRequest,e.bufferedRequestCount+=1}else Ee(r,e,!1,o,t,n,i);return f}function Ee(r,e,t,n,i,o,f){e.writelen=n,e.writecb=f,e.writing=!0,e.sync=!0,t?r._writev(i,e.onwrite):r._write(i,o,e.onwrite),e.sync=!1}function sn(r,e,t,n,i){--e.pendingcb,t?R(i,n):i(n),r._writableState.errorEmitted=!0,r.emit("error",n)}function ln(r){r.writing=!1,r.writecb=null,r.length-=r.writelen,r.writelen=0}function hn(r,e){var t=r._writableState,n=t.sync,i=t.writecb;if(ln(t),e)sn(r,t,n,e,i);else{var o=Rr(t);!o&&!t.corked&&!t.bufferProcessing&&t.bufferedRequest&&Er(r,t),n?R(We,r,t,o,i):We(r,t,o,i)}}function We(r,e,t,n){t||cn(r,e),e.pendingcb--,n(),Sr(r,e)}function cn(r,e){e.length===0&&e.needDrain&&(e.needDrain=!1,r.emit("drain"))}function Er(r,e){e.bufferProcessing=!0;var t=e.bufferedRequest;if(r._writev&&t&&t.next){var n=e.bufferedRequestCount,i=new Array(n),o=e.corkedRequestsFree;o.entry=t;for(var f=0;t;)i[f]=t,t=t.next,f+=1;Ee(r,e,!0,e.length,i,"",o.finish),e.pendingcb++,e.lastBufferedRequest=null,o.next?(e.corkedRequestsFree=o.next,o.next=null):e.corkedRequestsFree=new Ar(e)}else{for(;t;){var u=t.chunk,s=t.encoding,l=t.callback,h=e.objectMode?1:u.length;if(Ee(r,e,!1,h,u,s,l),t=t.next,e.writing)break}t===null&&(e.lastBufferedRequest=null)}e.bufferedRequestCount=0,e.bufferedRequest=t,e.bufferProcessing=!1}v.prototype._write=function(r,e,t){t(new Error("not implemented"))};v.prototype._writev=null;v.prototype.end=function(r,e,t){var n=this._writableState;typeof r=="function"?(t=r,r=null,e=null):typeof e=="function"&&(t=e,e=null),r!=null&&this.write(r,e),n.corked&&(n.corked=1,this.uncork()),!n.ending&&!n.finished&&dn(this,n,t)};function Rr(r){return r.ending&&r.length===0&&r.bufferedRequest===null&&!r.finished&&!r.writing}function ze(r,e){e.prefinished||(e.prefinished=!0,r.emit("prefinish"))}function Sr(r,e){var t=Rr(e);return t&&(e.pendingcb===0?(ze(r,e),e.finished=!0,r.emit("finish")):ze(r,e)),t}function dn(r,e,t){e.ending=!0,Sr(r,e),t&&(e.finished?R(t):r.once("finish",t)),e.ended=!0,r.writable=!1}function Ar(r){var e=this;this.next=null,this.entry=null,this.finish=function(t){var n=e.entry;for(e.entry=null;n;){var i=n.callback;r.pendingcb--,i(t),n=n.next}r.corkedRequestsFree?r.corkedRequestsFree.next=e:r.corkedRequestsFree=e}}J(E,m);var $e=Object.keys(v.prototype);for(var me=0;me<$e.length;me++){var ye=$e[me];E.prototype[ye]||(E.prototype[ye]=v.prototype[ye])}function E(r){if(!(this instanceof E))return new E(r);m.call(this,r),v.call(this,r),r&&r.readable===!1&&(this.readable=!1),r&&r.writable===!1&&(this.writable=!1),this.allowHalfOpen=!0,r&&r.allowHalfOpen===!1&&(this.allowHalfOpen=!1),this.once("end",pn)}function pn(){this.allowHalfOpen||this._writableState.ended||R(gn,this)}function gn(r){r.end()}J(S,E);function wn(r){this.afterTransform=function(e,t){return mn(r,e,t)},this.needTransform=!1,this.transforming=!1,this.writecb=null,this.writechunk=null,this.writeencoding=null}function mn(r,e,t){var n=r._transformState;n.transforming=!1;var i=n.writecb;if(!i)return r.emit("error",new Error("no writecb in Transform class"));n.writechunk=null,n.writecb=null,t!=null&&r.push(t),i(e);var o=r._readableState;o.reading=!1,(o.needReadable||o.length<o.highWaterMark)&&r._read(o.highWaterMark)}function S(r){if(!(this instanceof S))return new S(r);E.call(this,r),this._transformState=new wn(this);var e=this;this._readableState.needReadable=!0,this._readableState.sync=!1,r&&(typeof r.transform=="function"&&(this._transform=r.transform),typeof r.flush=="function"&&(this._flush=r.flush)),this.once("prefinish",function(){typeof this._flush=="function"?this._flush(function(t){Je(e,t)}):Je(e)})}S.prototype.push=function(r,e){return this._transformState.needTransform=!1,E.prototype.push.call(this,r,e)};S.prototype._transform=function(r,e,t){throw new Error("Not implemented")};S.prototype._write=function(r,e,t){var n=this._transformState;if(n.writecb=t,n.writechunk=r,n.writeencoding=e,!n.transforming){var i=this._readableState;(n.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}};S.prototype._read=function(r){var e=this._transformState;e.writechunk!==null&&e.writecb&&!e.transforming?(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform)):e.needTransform=!0};function Je(r,e){if(e)return r.emit("error",e);var t=r._writableState,n=r._transformState;if(t.length)throw new Error("Calling transform done when ws.length != 0");if(n.transforming)throw new Error("Calling transform done when still transforming");return r.push(null)}J(G,S);function G(r){if(!(this instanceof G))return new G(r);S.call(this,r)}G.prototype._transform=function(r,e,t){t(null,r)};J(L,d);L.Readable=m;L.Writable=v;L.Duplex=E;L.Transform=S;L.PassThrough=G;L.Stream=L;function L(){d.call(this)}L.prototype.pipe=function(r,e){var t=this;function n(h){r.writable&&r.write(h)===!1&&t.pause&&t.pause()}t.on("data",n);function i(){t.readable&&t.resume&&t.resume()}r.on("drain",i),!r._isStdio&&(!e||e.end!==!1)&&(t.on("end",f),t.on("close",u));var o=!1;function f(){o||(o=!0,r.end())}function u(){o||(o=!0,typeof r.destroy=="function"&&r.destroy())}function s(h){if(l(),d.listenerCount(this,"error")===0)throw h}t.on("error",s),r.on("error",s);function l(){t.removeListener("data",n),r.removeListener("drain",i),t.removeListener("end",f),t.removeListener("close",u),t.removeListener("error",s),r.removeListener("error",s),t.removeListener("end",l),t.removeListener("close",l),r.removeListener("close",l)}return t.on("end",l),t.on("close",l),r.on("close",l),r.emit("pipe",t),r};const yn=a.from([239,187,191]);class V extends Error{constructor(e,t,...n){Array.isArray(t)&&(t=t.join(" ")),super(t),Error.captureStackTrace!==void 0&&Error.captureStackTrace(this,V),this.code=e;for(const i of n)for(const o in i){const f=i[o];this[o]=k(f)?f.toString():f==null?f:JSON.parse(JSON.stringify(f))}}}const vn=function(r){return typeof r=="object"&&r!==null&&!Array.isArray(r)},_n=function(r){return r.replace(/([A-Z])/g,function(e,t){return"_"+t.toLowerCase()})},xn=".".charCodeAt(0),bn=/\\(\\)?/g,En=RegExp(`[^.[\\]]+|\\[(?:([^"'][^[]*)|(["'])((?:(?!\\2)[^\\\\]|\\\\.)*?)\\2)\\]|(?=(?:\\.|\\[\\])(?:\\.|\\[\\]|$))`,"g"),Rn=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Sn=/^\w*$/,An=function(r){return Object.prototype.toString.call(r)},Tr=function(r){const e=typeof r;return e==="symbol"||e==="object"&&r&&An(r)==="[object Symbol]"},Tn=function(r,e){if(Array.isArray(r))return!1;const t=typeof r;return t==="number"||t==="symbol"||t==="boolean"||!r||Tr(r)?!0:Sn.test(r)||!Rn.test(r)||e!=null&&r in Object(e)},Fn=function(r){const e=[];return r.charCodeAt(0)===xn&&e.push(""),r.replace(En,function(t,n,i,o){let f=t;i?f=o.replace(bn,"$1"):n&&(f=n.trim()),e.push(f)}),e},Cn=function(r,e){return Array.isArray(r)?r:Tn(r,e)?[r]:Fn(r)},In=function(r){if(typeof r=="string"||Tr(r))return r;const e=`${r}`;return e=="0"&&1/r==-INFINITY?"-0":e},Ln=function(r,e){e=Cn(e,r);let t=0;const n=e.length;for(;r!=null&&t<n;)r=r[In(e[t++])];return t&&t===n?r:void 0};class Mn extends S{constructor(e={}){super(ee({writableObjectMode:!0},e));const t={};let n;for(const i in e)t[_n(i)]=e[i];if((n=this.normalize(t))!==void 0)throw n;switch(t.record_delimiter){case"auto":t.record_delimiter=null;break;case"unix":t.record_delimiter=`
`;break;case"mac":t.record_delimiter="\r";break;case"windows":t.record_delimiter=`\r
`;break;case"ascii":t.record_delimiter="";break;case"unicode":t.record_delimiter="\u2028";break}this.options=t,this.state={stop:!1},this.info={records:0}}normalize(e){if(e.bom===void 0||e.bom===null||e.bom===!1)e.bom=!1;else if(e.bom!==!0)return new V("CSV_OPTION_BOOLEAN_INVALID_TYPE",["option `bom` is optional and must be a boolean value,",`got ${JSON.stringify(e.bom)}`]);if(e.delimiter===void 0||e.delimiter===null)e.delimiter=",";else if(k(e.delimiter))e.delimiter=e.delimiter.toString();else if(typeof e.delimiter!="string")return new V("CSV_OPTION_DELIMITER_INVALID_TYPE",["option `delimiter` must be a buffer or a string,",`got ${JSON.stringify(e.delimiter)}`]);if(e.quote===void 0||e.quote===null)e.quote='"';else if(e.quote===!0)e.quote='"';else if(e.quote===!1)e.quote="";else if(k(e.quote))e.quote=e.quote.toString();else if(typeof e.quote!="string")return new V("CSV_OPTION_QUOTE_INVALID_TYPE",["option `quote` must be a boolean, a buffer or a string,",`got ${JSON.stringify(e.quote)}`]);if((e.quoted===void 0||e.quoted===null)&&(e.quoted=!1),(e.quoted_empty===void 0||e.quoted_empty===null)&&(e.quoted_empty=void 0),e.quoted_match===void 0||e.quoted_match===null||e.quoted_match===!1?e.quoted_match=null:Array.isArray(e.quoted_match)||(e.quoted_match=[e.quoted_match]),e.quoted_match)for(const i of e.quoted_match){const o=typeof i=="string",f=i instanceof RegExp;if(!o&&!f)return Error(`Invalid Option: quoted_match must be a string or a regex, got ${JSON.stringify(i)}`)}if((e.quoted_string===void 0||e.quoted_string===null)&&(e.quoted_string=!1),(e.eof===void 0||e.eof===null)&&(e.eof=!0),e.escape===void 0||e.escape===null)e.escape='"';else if(k(e.escape))e.escape=e.escape.toString();else if(typeof e.escape!="string")return Error(`Invalid Option: escape must be a buffer or a string, got ${JSON.stringify(e.escape)}`);if(e.escape.length>1)return Error(`Invalid Option: escape must be one character, got ${e.escape.length} characters`);(e.header===void 0||e.header===null)&&(e.header=!1);const[t,n]=this.normalize_columns(e.columns);if(t)return t;if(e.columns=n,(e.quoted===void 0||e.quoted===null)&&(e.quoted=!1),(e.cast===void 0||e.cast===null)&&(e.cast={}),(e.cast.bigint===void 0||e.cast.bigint===null)&&(e.cast.bigint=i=>""+i),(e.cast.boolean===void 0||e.cast.boolean===null)&&(e.cast.boolean=i=>i?"1":""),(e.cast.date===void 0||e.cast.date===null)&&(e.cast.date=i=>""+i.getTime()),(e.cast.number===void 0||e.cast.number===null)&&(e.cast.number=i=>""+i),(e.cast.object===void 0||e.cast.object===null)&&(e.cast.object=i=>JSON.stringify(i)),(e.cast.string===void 0||e.cast.string===null)&&(e.cast.string=function(i){return i}),e.record_delimiter===void 0||e.record_delimiter===null)e.record_delimiter=`
`;else if(k(e.record_delimiter))e.record_delimiter=e.record_delimiter.toString();else if(typeof e.record_delimiter!="string")return Error(`Invalid Option: record_delimiter must be a buffer or a string, got ${JSON.stringify(e.record_delimiter)}`)}_transform(e,t,n){if(this.state.stop===!0)return;const i=this.__transform(e);i!==void 0&&(this.state.stop=!0),n(i)}_flush(e){if(this.state.stop!==!0){if(this.info.records===0){this.bom();const t=this.headers();t&&e(t)}e()}}__transform(e){if(!Array.isArray(e)&&typeof e!="object")return Error(`Invalid Record: expect an array or an object, got ${JSON.stringify(e)}`);if(this.info.records===0){if(Array.isArray(e)){if(this.options.header===!0&&this.options.columns===void 0)return Error("Undiscoverable Columns: header option requires column option or object records")}else if(this.options.columns===void 0){const[i,o]=this.normalize_columns(Object.keys(e));if(i)return;this.options.columns=o}}if(this.info.records===0){this.bom();const i=this.headers();if(i)return i}try{this.emit("record",e,this.info.records)}catch(i){return i}let t,n;if(this.options.eof){if([t,n]=this.stringify(e),t)return t;if(n===void 0)return;n=n+this.options.record_delimiter}else{if([t,n]=this.stringify(e),t)return t;if(n===void 0)return;(this.options.header||this.info.records)&&(n=this.options.record_delimiter+n)}this.info.records++,this.push(n)}stringify(e,t=!1){if(typeof e!="object")return[void 0,e];const{columns:n}=this.options,i=[];if(Array.isArray(e)){n&&e.splice(n.length);for(let f=0;f<e.length;f++){const u=e[f],[s,l]=this.__cast(u,{index:f,column:f,records:this.info.records,header:t});if(s)return[s];i[f]=[l,u]}}else for(let f=0;f<n.length;f++){const u=Ln(e,n[f].key),[s,l]=this.__cast(u,{index:f,column:n[f].key,records:this.info.records,header:t});if(s)return[s];i[f]=[l,u]}let o="";for(let f=0;f<i.length;f++){let u,s,[l,h]=i[f];if(typeof l=="string")u=this.options;else if(vn(l)){if(u=l,l=u.value,delete u.value,typeof l!="string"&&l!==void 0&&l!==null&&s)return[Error(`Invalid Casting Value: returned value must return a string, null or undefined, got ${JSON.stringify(l)}`)];if(u=ee(ee({},this.options),u),(s=this.normalize(u))!==void 0)return[s]}else if(l==null)u=this.options;else return[Error(`Invalid Casting Value: returned value must return a string, an object, null or undefined, got ${JSON.stringify(l)}`)];const{delimiter:c,escape:w,quote:p,quoted:x,quoted_empty:M,quoted_string:W,quoted_match:F,record_delimiter:le}=u;if(l){if(typeof l!="string")return[Error(`Formatter must return a string, null or undefined, got ${JSON.stringify(l)}`)];const Fr=c.length&&l.indexOf(c)>=0,Me=p!==""&&l.indexOf(p)>=0,Cr=l.indexOf(w)>=0&&w!==p,Ir=l.indexOf(le)>=0,Lr=W&&typeof h=="string";let X=F&&F.filter(P=>typeof P=="string"?l.indexOf(P)!==-1:P.test(l));X=X&&X.length>0;const Be=Me===!0||Fr||Ir||x||Lr||X;if(Be===!0&&Cr===!0){const P=w==="\\"?new RegExp(w+w,"g"):new RegExp(w,"g");l=l.replace(P,w+w)}if(Me===!0){const P=new RegExp(p,"g");l=l.replace(P,w+p)}Be===!0&&(l=p+l+p),o+=l}else(M===!0||h===""&&W===!0&&M!==!1)&&(o+=p+p);f!==i.length-1&&(o+=c)}return[void 0,o]}bom(){this.options.bom===!0&&this.push(yn)}headers(){if(this.options.header===!1||this.options.columns===void 0)return;let e,t=this.options.columns.map(n=>n.header);if(this.options.eof?([e,t]=this.stringify(t,!0),t+=this.options.record_delimiter):[e,t]=this.stringify(t),e)return e;this.push(t)}__cast(e,t){const n=typeof e;try{return n==="string"?[void 0,this.options.cast.string(e,t)]:n==="bigint"?[void 0,this.options.cast.bigint(e,t)]:n==="number"?[void 0,this.options.cast.number(e,t)]:n==="boolean"?[void 0,this.options.cast.boolean(e,t)]:e instanceof Date?[void 0,this.options.cast.date(e,t)]:n==="object"&&e!==null?[void 0,this.options.cast.object(e,t)]:[void 0,e,e]}catch(i){return[i]}}normalize_columns(e){if(e==null)return[];if(typeof e!="object")return[Error('Invalid option "columns": expect an array or an object')];if(Array.isArray(e)){const t=[];for(const n of e)if(typeof n=="string")t.push({key:n,header:n});else if(typeof n=="object"&&n!==void 0&&!Array.isArray(n)){if(!n.key)return[Error('Invalid column definition: property "key" is required')];n.header===void 0&&(n.header=n.key),t.push(n)}else return[Error("Invalid column definition: expect a string or an object")];e=t}else{const t=[];for(const n in e)t.push({key:n,header:e[n]});e=t}return[void 0,e]}}const Dn=function(r,e={}){const t=[],n=new Mn(e);n.push=function(i){i!==null&&t.push(i.toString())};for(const i of r){const o=n.__transform(i,null);if(o!==void 0)throw o}return t.join("")};export{Dn as s};
//# sourceMappingURL=sync.94c5b92d.js.map
