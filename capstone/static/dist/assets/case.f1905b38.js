import{c as T,_ as O}from"./_commonjsHelpers.9baf49e8.js";import{n as M,V as A}from"./vueComponentNormalizer.7ffcf611.js";import{l as L}from"./index.7519ad19.js";import{$ as w}from"./jquery.dbd78d0d.js";import"./jquery_django_csrf.0b115699.js";import{j as F,g as P}from"./api.7ca8e714.js";import"./utils.988e2790.js";var R={exports:{}};/*!***************************************************
* mark.js v8.11.1
* https://markjs.io/
* Copyright (c) 2014–2018, Julian Kühnel
* Released under the MIT license https://git.io/vwTVl
*****************************************************/(function(i,E){(function(u,g){i.exports=g()})(T,function(){var u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(d){return typeof d}:function(d){return d&&typeof Symbol=="function"&&d.constructor===Symbol&&d!==Symbol.prototype?"symbol":typeof d},g=function(d,c){if(!(d instanceof c))throw new TypeError("Cannot call a class as a function")},m=function(){function d(c,e){for(var n=0;n<e.length;n++){var t=e[n];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(c,t.key,t)}}return function(c,e,n){return e&&d(c.prototype,e),n&&d(c,n),c}}(),v=Object.assign||function(d){for(var c=1;c<arguments.length;c++){var e=arguments[c];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(d[n]=e[n])}return d},k=function(){function d(c){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[],t=arguments.length>3&&arguments[3]!==void 0?arguments[3]:5e3;g(this,d),this.ctx=c,this.iframes=e,this.exclude=n,this.iframesTimeout=t}return m(d,[{key:"getContexts",value:function(){var e=void 0,n=[];return typeof this.ctx=="undefined"||!this.ctx?e=[]:NodeList.prototype.isPrototypeOf(this.ctx)?e=Array.prototype.slice.call(this.ctx):Array.isArray(this.ctx)?e=this.ctx:typeof this.ctx=="string"?e=Array.prototype.slice.call(document.querySelectorAll(this.ctx)):e=[this.ctx],e.forEach(function(t){var a=n.filter(function(r){return r.contains(t)}).length>0;n.indexOf(t)===-1&&!a&&n.push(t)}),n}},{key:"getIframeContents",value:function(e,n){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:function(){},a=void 0;try{var r=e.contentWindow;if(a=r.document,!r||!a)throw new Error("iframe inaccessible")}catch{t()}a&&n(a)}},{key:"isIframeBlank",value:function(e){var n="about:blank",t=e.getAttribute("src").trim(),a=e.contentWindow.location.href;return a===n&&t!==n&&t}},{key:"observeIframeLoad",value:function(e,n,t){var a=this,r=!1,o=null,s=function l(){if(!r){r=!0,clearTimeout(o);try{a.isIframeBlank(e)||(e.removeEventListener("load",l),a.getIframeContents(e,n,t))}catch{t()}}};e.addEventListener("load",s),o=setTimeout(s,this.iframesTimeout)}},{key:"onIframeReady",value:function(e,n,t){try{e.contentWindow.document.readyState==="complete"?this.isIframeBlank(e)?this.observeIframeLoad(e,n,t):this.getIframeContents(e,n,t):this.observeIframeLoad(e,n,t)}catch{t()}}},{key:"waitForIframes",value:function(e,n){var t=this,a=0;this.forEachIframe(e,function(){return!0},function(r){a++,t.waitForIframes(r.querySelector("html"),function(){--a||n()})},function(r){r||n()})}},{key:"forEachIframe",value:function(e,n,t){var a=this,r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:function(){},o=e.querySelectorAll("iframe"),s=o.length,l=0;o=Array.prototype.slice.call(o);var h=function(){--s<=0&&r(l)};s||h(),o.forEach(function(f){d.matches(f,a.exclude)?h():a.onIframeReady(f,function(p){n(f)&&(l++,t(p)),h()},h)})}},{key:"createIterator",value:function(e,n,t){return document.createNodeIterator(e,n,t,!1)}},{key:"createInstanceOnIframe",value:function(e){return new d(e.querySelector("html"),this.iframes)}},{key:"compareNodeIframe",value:function(e,n,t){var a=e.compareDocumentPosition(t),r=Node.DOCUMENT_POSITION_PRECEDING;if(a&r)if(n!==null){var o=n.compareDocumentPosition(t),s=Node.DOCUMENT_POSITION_FOLLOWING;if(o&s)return!0}else return!0;return!1}},{key:"getIteratorNode",value:function(e){var n=e.previousNode(),t=void 0;return n===null?t=e.nextNode():t=e.nextNode()&&e.nextNode(),{prevNode:n,node:t}}},{key:"checkIframeFilter",value:function(e,n,t,a){var r=!1,o=!1;return a.forEach(function(s,l){s.val===t&&(r=l,o=s.handled)}),this.compareNodeIframe(e,n,t)?(r===!1&&!o?a.push({val:t,handled:!0}):r!==!1&&!o&&(a[r].handled=!0),!0):(r===!1&&a.push({val:t,handled:!1}),!1)}},{key:"handleOpenIframes",value:function(e,n,t,a){var r=this;e.forEach(function(o){o.handled||r.getIframeContents(o.val,function(s){r.createInstanceOnIframe(s).forEachNode(n,t,a)})})}},{key:"iterateThroughNodes",value:function(e,n,t,a,r){for(var o=this,s=this.createIterator(n,e,a),l=[],h=[],f=void 0,p=void 0,y=function(){var S=o.getIteratorNode(s);return p=S.prevNode,f=S.node,f};y();)this.iframes&&this.forEachIframe(n,function(x){return o.checkIframeFilter(f,p,x,l)},function(x){o.createInstanceOnIframe(x).forEachNode(e,function(S){return h.push(S)},a)}),h.push(f);h.forEach(function(x){t(x)}),this.iframes&&this.handleOpenIframes(l,e,t,a),r()}},{key:"forEachNode",value:function(e,n,t){var a=this,r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:function(){},o=this.getContexts(),s=o.length;s||r(),o.forEach(function(l){var h=function(){a.iterateThroughNodes(e,l,n,t,function(){--s<=0&&r()})};a.iframes?a.waitForIframes(l,h):h()})}}],[{key:"matches",value:function(e,n){var t=typeof n=="string"?[n]:n,a=e.matches||e.matchesSelector||e.msMatchesSelector||e.mozMatchesSelector||e.oMatchesSelector||e.webkitMatchesSelector;if(a){var r=!1;return t.every(function(o){return a.call(e,o)?(r=!0,!1):!0}),r}else return!1}}]),d}(),I=function(){function d(c){g(this,d),this.ctx=c,this.ie=!1;var e=window.navigator.userAgent;(e.indexOf("MSIE")>-1||e.indexOf("Trident")>-1)&&(this.ie=!0)}return m(d,[{key:"log",value:function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"debug",t=this.opt.log;!this.opt.debug||(typeof t=="undefined"?"undefined":u(t))==="object"&&typeof t[n]=="function"&&t[n]("mark.js: "+e)}},{key:"escapeStr",value:function(e){return e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}},{key:"createRegExp",value:function(e){return this.opt.wildcards!=="disabled"&&(e=this.setupWildcardsRegExp(e)),e=this.escapeStr(e),Object.keys(this.opt.synonyms).length&&(e=this.createSynonymsRegExp(e)),(this.opt.ignoreJoiners||this.opt.ignorePunctuation.length)&&(e=this.setupIgnoreJoinersRegExp(e)),this.opt.diacritics&&(e=this.createDiacriticsRegExp(e)),e=this.createMergedBlanksRegExp(e),(this.opt.ignoreJoiners||this.opt.ignorePunctuation.length)&&(e=this.createJoinersRegExp(e)),this.opt.wildcards!=="disabled"&&(e=this.createWildcardsRegExp(e)),e=this.createAccuracyRegExp(e),e}},{key:"createSynonymsRegExp",value:function(e){var n=this.opt.synonyms,t=this.opt.caseSensitive?"":"i",a=this.opt.ignoreJoiners||this.opt.ignorePunctuation.length?"\0":"";for(var r in n)if(n.hasOwnProperty(r)){var o=n[r],s=this.opt.wildcards!=="disabled"?this.setupWildcardsRegExp(r):this.escapeStr(r),l=this.opt.wildcards!=="disabled"?this.setupWildcardsRegExp(o):this.escapeStr(o);s!==""&&l!==""&&(e=e.replace(new RegExp("("+this.escapeStr(s)+"|"+this.escapeStr(l)+")","gm"+t),a+("("+this.processSynomyms(s)+"|")+(this.processSynomyms(l)+")")+a))}return e}},{key:"processSynomyms",value:function(e){return(this.opt.ignoreJoiners||this.opt.ignorePunctuation.length)&&(e=this.setupIgnoreJoinersRegExp(e)),e}},{key:"setupWildcardsRegExp",value:function(e){return e=e.replace(/(?:\\)*\?/g,function(n){return n.charAt(0)==="\\"?"?":""}),e.replace(/(?:\\)*\*/g,function(n){return n.charAt(0)==="\\"?"*":""})}},{key:"createWildcardsRegExp",value:function(e){var n=this.opt.wildcards==="withSpaces";return e.replace(/\u0001/g,n?"[\\S\\s]?":"\\S?").replace(/\u0002/g,n?"[\\S\\s]*?":"\\S*")}},{key:"setupIgnoreJoinersRegExp",value:function(e){return e.replace(/[^(|)\\]/g,function(n,t,a){var r=a.charAt(t+1);return/[(|)\\]/.test(r)||r===""?n:n+"\0"})}},{key:"createJoinersRegExp",value:function(e){var n=[],t=this.opt.ignorePunctuation;return Array.isArray(t)&&t.length&&n.push(this.escapeStr(t.join(""))),this.opt.ignoreJoiners&&n.push("\\u00ad\\u200b\\u200c\\u200d"),n.length?e.split(/\u0000+/).join("["+n.join("")+"]*"):e}},{key:"createDiacriticsRegExp",value:function(e){var n=this.opt.caseSensitive?"":"i",t=this.opt.caseSensitive?["a\xE0\xE1\u1EA3\xE3\u1EA1\u0103\u1EB1\u1EAF\u1EB3\u1EB5\u1EB7\xE2\u1EA7\u1EA5\u1EA9\u1EAB\u1EAD\xE4\xE5\u0101\u0105","A\xC0\xC1\u1EA2\xC3\u1EA0\u0102\u1EB0\u1EAE\u1EB2\u1EB4\u1EB6\xC2\u1EA6\u1EA4\u1EA8\u1EAA\u1EAC\xC4\xC5\u0100\u0104","c\xE7\u0107\u010D","C\xC7\u0106\u010C","d\u0111\u010F","D\u0110\u010E","e\xE8\xE9\u1EBB\u1EBD\u1EB9\xEA\u1EC1\u1EBF\u1EC3\u1EC5\u1EC7\xEB\u011B\u0113\u0119","E\xC8\xC9\u1EBA\u1EBC\u1EB8\xCA\u1EC0\u1EBE\u1EC2\u1EC4\u1EC6\xCB\u011A\u0112\u0118","i\xEC\xED\u1EC9\u0129\u1ECB\xEE\xEF\u012B","I\xCC\xCD\u1EC8\u0128\u1ECA\xCE\xCF\u012A","l\u0142","L\u0141","n\xF1\u0148\u0144","N\xD1\u0147\u0143","o\xF2\xF3\u1ECF\xF5\u1ECD\xF4\u1ED3\u1ED1\u1ED5\u1ED7\u1ED9\u01A1\u1EDF\u1EE1\u1EDB\u1EDD\u1EE3\xF6\xF8\u014D","O\xD2\xD3\u1ECE\xD5\u1ECC\xD4\u1ED2\u1ED0\u1ED4\u1ED6\u1ED8\u01A0\u1EDE\u1EE0\u1EDA\u1EDC\u1EE2\xD6\xD8\u014C","r\u0159","R\u0158","s\u0161\u015B\u0219\u015F","S\u0160\u015A\u0218\u015E","t\u0165\u021B\u0163","T\u0164\u021A\u0162","u\xF9\xFA\u1EE7\u0169\u1EE5\u01B0\u1EEB\u1EE9\u1EED\u1EEF\u1EF1\xFB\xFC\u016F\u016B","U\xD9\xDA\u1EE6\u0168\u1EE4\u01AF\u1EEA\u1EE8\u1EEC\u1EEE\u1EF0\xDB\xDC\u016E\u016A","y\xFD\u1EF3\u1EF7\u1EF9\u1EF5\xFF","Y\xDD\u1EF2\u1EF6\u1EF8\u1EF4\u0178","z\u017E\u017C\u017A","Z\u017D\u017B\u0179"]:["a\xE0\xE1\u1EA3\xE3\u1EA1\u0103\u1EB1\u1EAF\u1EB3\u1EB5\u1EB7\xE2\u1EA7\u1EA5\u1EA9\u1EAB\u1EAD\xE4\xE5\u0101\u0105A\xC0\xC1\u1EA2\xC3\u1EA0\u0102\u1EB0\u1EAE\u1EB2\u1EB4\u1EB6\xC2\u1EA6\u1EA4\u1EA8\u1EAA\u1EAC\xC4\xC5\u0100\u0104","c\xE7\u0107\u010DC\xC7\u0106\u010C","d\u0111\u010FD\u0110\u010E","e\xE8\xE9\u1EBB\u1EBD\u1EB9\xEA\u1EC1\u1EBF\u1EC3\u1EC5\u1EC7\xEB\u011B\u0113\u0119E\xC8\xC9\u1EBA\u1EBC\u1EB8\xCA\u1EC0\u1EBE\u1EC2\u1EC4\u1EC6\xCB\u011A\u0112\u0118","i\xEC\xED\u1EC9\u0129\u1ECB\xEE\xEF\u012BI\xCC\xCD\u1EC8\u0128\u1ECA\xCE\xCF\u012A","l\u0142L\u0141","n\xF1\u0148\u0144N\xD1\u0147\u0143","o\xF2\xF3\u1ECF\xF5\u1ECD\xF4\u1ED3\u1ED1\u1ED5\u1ED7\u1ED9\u01A1\u1EDF\u1EE1\u1EDB\u1EDD\u1EE3\xF6\xF8\u014DO\xD2\xD3\u1ECE\xD5\u1ECC\xD4\u1ED2\u1ED0\u1ED4\u1ED6\u1ED8\u01A0\u1EDE\u1EE0\u1EDA\u1EDC\u1EE2\xD6\xD8\u014C","r\u0159R\u0158","s\u0161\u015B\u0219\u015FS\u0160\u015A\u0218\u015E","t\u0165\u021B\u0163T\u0164\u021A\u0162","u\xF9\xFA\u1EE7\u0169\u1EE5\u01B0\u1EEB\u1EE9\u1EED\u1EEF\u1EF1\xFB\xFC\u016F\u016BU\xD9\xDA\u1EE6\u0168\u1EE4\u01AF\u1EEA\u1EE8\u1EEC\u1EEE\u1EF0\xDB\xDC\u016E\u016A","y\xFD\u1EF3\u1EF7\u1EF9\u1EF5\xFFY\xDD\u1EF2\u1EF6\u1EF8\u1EF4\u0178","z\u017E\u017C\u017AZ\u017D\u017B\u0179"],a=[];return e.split("").forEach(function(r){t.every(function(o){if(o.indexOf(r)!==-1){if(a.indexOf(o)>-1)return!1;e=e.replace(new RegExp("["+o+"]","gm"+n),"["+o+"]"),a.push(o)}return!0})}),e}},{key:"createMergedBlanksRegExp",value:function(e){return e.replace(/[\s]+/gmi,"[\\s]+")}},{key:"createAccuracyRegExp",value:function(e){var n=this,t="!\"#$%&'()*+,-./:;<=>?@[\\]^_`{|}~\xA1\xBF",a=this.opt.accuracy,r=typeof a=="string"?a:a.value,o=typeof a=="string"?[]:a.limiters,s="";switch(o.forEach(function(l){s+="|"+n.escapeStr(l)}),r){case"partially":default:return"()("+e+")";case"complementary":return s="\\s"+(s||this.escapeStr(t)),"()([^"+s+"]*"+e+"[^"+s+"]*)";case"exactly":return"(^|\\s"+s+")("+e+")(?=$|\\s"+s+")"}}},{key:"getSeparatedKeywords",value:function(e){var n=this,t=[];return e.forEach(function(a){n.opt.separateWordSearch?a.split(" ").forEach(function(r){r.trim()&&t.indexOf(r)===-1&&t.push(r)}):a.trim()&&t.indexOf(a)===-1&&t.push(a)}),{keywords:t.sort(function(a,r){return r.length-a.length}),length:t.length}}},{key:"isNumeric",value:function(e){return Number(parseFloat(e))==e}},{key:"checkRanges",value:function(e){var n=this;if(!Array.isArray(e)||Object.prototype.toString.call(e[0])!=="[object Object]")return this.log("markRanges() will only accept an array of objects"),this.opt.noMatch(e),[];var t=[],a=0;return e.sort(function(r,o){return r.start-o.start}).forEach(function(r){var o=n.callNoMatchOnInvalidRanges(r,a),s=o.start,l=o.end,h=o.valid;h&&(r.start=s,r.length=l-s,t.push(r),a=l)}),t}},{key:"callNoMatchOnInvalidRanges",value:function(e,n){var t=void 0,a=void 0,r=!1;return e&&typeof e.start!="undefined"?(t=parseInt(e.start,10),a=t+parseInt(e.length,10),this.isNumeric(e.start)&&this.isNumeric(e.length)&&a-n>0&&a-t>0?r=!0:(this.log("Ignoring invalid or overlapping range: "+(""+JSON.stringify(e))),this.opt.noMatch(e))):(this.log("Ignoring invalid range: "+JSON.stringify(e)),this.opt.noMatch(e)),{start:t,end:a,valid:r}}},{key:"checkWhitespaceRanges",value:function(e,n,t){var a=void 0,r=!0,o=t.length,s=n-o,l=parseInt(e.start,10)-s;return l=l>o?o:l,a=l+parseInt(e.length,10),a>o&&(a=o,this.log("End range automatically set to the max value of "+o)),l<0||a-l<0||l>o||a>o?(r=!1,this.log("Invalid range: "+JSON.stringify(e)),this.opt.noMatch(e)):t.substring(l,a).replace(/\s+/g,"")===""&&(r=!1,this.log("Skipping whitespace only range: "+JSON.stringify(e)),this.opt.noMatch(e)),{start:l,end:a,valid:r}}},{key:"getTextNodes",value:function(e){var n=this,t="",a=[];this.iterator.forEachNode(NodeFilter.SHOW_TEXT,function(r){a.push({start:t.length,end:(t+=r.textContent).length,node:r})},function(r){return n.matchesExclude(r.parentNode)?NodeFilter.FILTER_REJECT:NodeFilter.FILTER_ACCEPT},function(){e({value:t,nodes:a})})}},{key:"matchesExclude",value:function(e){return k.matches(e,this.opt.exclude.concat(["script","style","title","head","html"]))}},{key:"wrapRangeInTextNode",value:function(e,n,t){var a=this.opt.element?this.opt.element:"mark",r=e.splitText(n),o=r.splitText(t-n),s=document.createElement(a);return s.setAttribute("data-markjs","true"),this.opt.className&&s.setAttribute("class",this.opt.className),s.textContent=r.textContent,r.parentNode.replaceChild(s,r),o}},{key:"wrapRangeInMappedTextNode",value:function(e,n,t,a,r){var o=this;e.nodes.every(function(s,l){var h=e.nodes[l+1];if(typeof h=="undefined"||h.start>n){if(!a(s.node))return!1;var f=n-s.start,p=(t>s.end?s.end:t)-s.start,y=e.value.substr(0,s.start),x=e.value.substr(p+s.start);if(s.node=o.wrapRangeInTextNode(s.node,f,p),e.value=y+x,e.nodes.forEach(function(S,_){_>=l&&(e.nodes[_].start>0&&_!==l&&(e.nodes[_].start-=p),e.nodes[_].end-=p)}),t-=p,r(s.node.previousSibling,s.start),t>s.end)n=s.end;else return!1}return!0})}},{key:"wrapMatches",value:function(e,n,t,a,r){var o=this,s=n===0?0:n+1;this.getTextNodes(function(l){l.nodes.forEach(function(h){h=h.node;for(var f=void 0;(f=e.exec(h.textContent))!==null&&f[s]!=="";)if(!!t(f[s],h)){var p=f.index;if(s!==0)for(var y=1;y<s;y++)p+=f[y].length;h=o.wrapRangeInTextNode(h,p,p+f[s].length),a(h.previousSibling),e.lastIndex=0}}),r()})}},{key:"wrapMatchesAcrossElements",value:function(e,n,t,a,r){var o=this,s=n===0?0:n+1;this.getTextNodes(function(l){for(var h=void 0;(h=e.exec(l.value))!==null&&h[s]!=="";){var f=h.index;if(s!==0)for(var p=1;p<s;p++)f+=h[p].length;var y=f+h[s].length;o.wrapRangeInMappedTextNode(l,f,y,function(x){return t(h[s],x)},function(x,S){e.lastIndex=S,a(x)})}r()})}},{key:"wrapRangeFromIndex",value:function(e,n,t,a){var r=this;this.getTextNodes(function(o){var s=o.value.length;e.forEach(function(l,h){var f=r.checkWhitespaceRanges(l,s,o.value),p=f.start,y=f.end,x=f.valid;x&&r.wrapRangeInMappedTextNode(o,p,y,function(S){return n(S,l,o.value.substring(p,y),h)},function(S){t(S,l)})}),a()})}},{key:"unwrapMatches",value:function(e){for(var n=e.parentNode,t=document.createDocumentFragment();e.firstChild;)t.appendChild(e.removeChild(e.firstChild));n.replaceChild(t,e),this.ie?this.normalizeTextNode(n):n.normalize()}},{key:"normalizeTextNode",value:function(e){if(!!e){if(e.nodeType===3)for(;e.nextSibling&&e.nextSibling.nodeType===3;)e.nodeValue+=e.nextSibling.nodeValue,e.parentNode.removeChild(e.nextSibling);else this.normalizeTextNode(e.firstChild);this.normalizeTextNode(e.nextSibling)}}},{key:"markRegExp",value:function(e,n){var t=this;this.opt=n,this.log('Searching with expression "'+e+'"');var a=0,r="wrapMatches",o=function(l){a++,t.opt.each(l)};this.opt.acrossElements&&(r="wrapMatchesAcrossElements"),this[r](e,this.opt.ignoreGroups,function(s,l){return t.opt.filter(l,s,a)},o,function(){a===0&&t.opt.noMatch(e),t.opt.done(a)})}},{key:"mark",value:function(e,n){var t=this;this.opt=n;var a=0,r="wrapMatches",o=this.getSeparatedKeywords(typeof e=="string"?[e]:e),s=o.keywords,l=o.length,h=this.opt.caseSensitive?"":"i",f=function p(y){var x=new RegExp(t.createRegExp(y),"gm"+h),S=0;t.log('Searching with expression "'+x+'"'),t[r](x,1,function(_,C){return t.opt.filter(C,y,a,S)},function(_){S++,a++,t.opt.each(_)},function(){S===0&&t.opt.noMatch(y),s[l-1]===y?t.opt.done(a):p(s[s.indexOf(y)+1])})};this.opt.acrossElements&&(r="wrapMatchesAcrossElements"),l===0?this.opt.done(a):f(s[0])}},{key:"markRanges",value:function(e,n){var t=this;this.opt=n;var a=0,r=this.checkRanges(e);r&&r.length?(this.log("Starting to mark with the following ranges: "+JSON.stringify(r)),this.wrapRangeFromIndex(r,function(o,s,l,h){return t.opt.filter(o,s,l,h)},function(o,s){a++,t.opt.each(o,s)},function(){t.opt.done(a)})):this.opt.done(a)}},{key:"unmark",value:function(e){var n=this;this.opt=e;var t=this.opt.element?this.opt.element:"*";t+="[data-markjs]",this.opt.className&&(t+="."+this.opt.className),this.log('Removal selector "'+t+'"'),this.iterator.forEachNode(NodeFilter.SHOW_ELEMENT,function(a){n.unwrapMatches(a)},function(a){var r=k.matches(a,t),o=n.matchesExclude(a);return!r||o?NodeFilter.FILTER_REJECT:NodeFilter.FILTER_ACCEPT},this.opt.done)}},{key:"opt",set:function(e){this._opt=v({},{element:"",className:"",exclude:[],iframes:!1,iframesTimeout:5e3,separateWordSearch:!0,diacritics:!0,synonyms:{},accuracy:"partially",acrossElements:!1,caseSensitive:!1,ignoreJoiners:!1,ignoreGroups:0,ignorePunctuation:[],wildcards:"disabled",each:function(){},noMatch:function(){},filter:function(){return!0},done:function(){},debug:!1,log:window.console},e)},get:function(){return this._opt}},{key:"iterator",get:function(){return new k(this.ctx,this.opt.iframes,this.opt.exclude,this.opt.iframesTimeout)}}]),d}();function b(d){var c=this,e=new I(d);return this.mark=function(n,t){return e.mark(n,t),c},this.markRegExp=function(n,t){return e.markRegExp(n,t),c},this.markRanges=function(n,t){return e.markRanges(n,t),c},this.unmark=function(n){return e.unmark(n),c},this}return b})})(R);var J=R.exports,W=function(){var i=this,E=i.$createElement,u=i._self._c||E;return u("div",[u("hr",{staticClass:"d-lg-none"}),i.opinions?u("div",{staticClass:"sidebar-section outline",attrs:{id:"outline-section"}},[u("h2",{staticClass:"sidebar-title"},[i._v("Case outline")]),u("div",{staticClass:"sidebar-section-contents"},[u("ul",i._l(i.opinions,function(g){return u("li",{key:g.id},[u("a",{attrs:{href:"#"+g.id}},[i._v(i._s(g.type))]),g.author?u("span",[i._v(" \u2014 "+i._s(g.author))]):i._e()])}),0)])]):i._e(),i._t("other-formats"),u("div",{staticClass:"sidebar-section",attrs:{id:"citing-section"}},[u("h2",{staticClass:"sidebar-title"},[i._v("Citing cases")]),u("div",{staticClass:"sidebar-section-contents"},[i.citingCount===null?u("span",[u("a",{attrs:{href:i.urls.citedBy}},[i._v("cases citing to this case")])]):i.citingCount===0?u("span",[i._v("No cases cite to this case")]):u("span",[u("a",{attrs:{href:i.urls.citedBy}},[i._v(i._s(i.citingCount)+" case"+i._s(i.citingCount===1?"":"s")+" cite to this case")]),u("br"),u("a",{attrs:{href:i.searchForTrends()}},[i._v("View citation history in trends")])])])]),i._t("source"),i._t("similar-cases"),u("hr",{staticClass:"d-none d-lg-block"}),u("div",{staticClass:"sidebar-section d-none d-lg-block",attrs:{id:"tools-section"}},[u("h2",{staticClass:"sidebar-title"},[i._v("Tools")]),u("h3",[i._v("Selection tools")]),u("div",{staticClass:"sidebar-section-contents"},[i.selectedText?u("ul",{staticClass:"bullets"},[u("li",[u("a",{attrs:{href:i.linkToSelection()}},[i._v('Link to "'+i._s(i.selectedTextShort)+'"')])]),u("li",[u("a",{attrs:{href:"#"},on:{click:function(g){return g.preventDefault(),i.copyCiteToSelection.apply(null,arguments)}}},[i._v('Copy "'+i._s(i.selectedTextShort)+'" with cite')]),u("span",{attrs:{"aria-live":"polite"}},[i.copyStatus?u("span",{staticClass:"ml-1"},[i._v(i._s(i.copyStatus))]):i._e()])]),u("li",[u("a",{attrs:{href:i.searchForSelection()}},[i._v('Search cases for "'+i._s(i.selectedTextShort)+'"')])]),i.templateVars.isStaff?u("li",[u("a",{attrs:{href:"#"},on:{click:function(g){return g.preventDefault(),i.elideOrRedactSelection("elide")}}},[i._v('\u26A0\uFE0F Elide "'+i._s(i.selectedTextShort)+'"')])]):i._e(),i.templateVars.isStaff?u("li",[u("a",{attrs:{href:"#"},on:{click:function(g){return g.preventDefault(),i.elideOrRedactSelection("redact")}}},[i._v('\u26A0\uFE0F Redact "'+i._s(i.selectedTextShort)+'"')])]):i._e()]):u("span",[i._v("Select text to link, cite, or search")])])]),i._t("analysis"),i._t("admin-tools"),u("hr",{staticClass:"d-lg-flex"}),i._t("info")],2)},$=[];const D={name:"Sidebar",created(){this.templateVars=templateVars,this.urls=this.templateVars.urls,this.fetchCitingCount()},mounted(){const i=document.querySelector(".case-container");document.addEventListener("selectionchange",L(()=>{const m=window.getSelection();if(!i.contains(m.anchorNode))return;const v=m.getRangeAt(0),k=v.toString();k&&(this.selectedText=k,this.lastSelection=v)}));const E=new URLSearchParams(window.location.search).get("highlight");E&&(new J(i).mark(E,{separateWordSearch:!1,diacritics:!0,acrossElements:!0}),document.querySelector("mark").scrollIntoView()),document.addEventListener("keydown",m=>{if((m.ctrlKey||m.metaKey)&&m.key==="/")document.querySelector("#sidebar-menu").focus();else if(m.key==="Escape"){for(const v of document.querySelectorAll(".focusable-element"))v.remove();this.lastSelection&&(this.lastSelection.insertNode(this.lastSelection.createContextualFragment("<span class='focusable-element' tabindex='-1'></span>")),document.querySelector(".focusable-element").focus())}});function u(m){const v=w(m);v.text()===v.attr("data-hidden-text")?v.text(v.attr("data-orig-text")):(v.attr("data-orig-text",v.text()),v.text(v.attr("data-hidden-text")))}w(".elided-text").on("click",m=>{u(m.target)}).on("keypress",m=>{m.which===13&&u(m.target)});const g=[];for(const m of i.querySelectorAll(".opinion")){let v="";const k=m.querySelector(".author");if(k){const I=w(k).clone();I.find(".page-label").remove(),v=I.text().toLowerCase().replace(/^[^\w.]|[^\w.]$/g,"")}g.push({id:m.firstElementChild.id,type:m.getAttribute("data-type").toLowerCase().replace("-"," "),author:v})}this.opinions=g},data(){return{selectedText:null,lastSelection:null,copyStatus:null,opinions:null,citingCount:null,sidebarStatus:!0}},watch:{selectedText(){this.copyStatus=null}},computed:{selectedTextShort(){const E=this.selectedText.split(/\s+/);let u=E.slice(0,2).join(" ");return E.length>2&&(u+=" ..."),u}},methods:{async fetchCitingCount(){const i=await F(P(this.urls.api,"cases",{cites_to:this.templateVars.caseId,page_size:1}));this.citingCount=i.count},linkToSelection(){const i=new URL(window.location.href);return i.searchParams.delete("highlight"),i.searchParams.append("highlight",this.selectedText),i.toString()},searchForSelection(){return this.urls.search+"?search="+encodeURIComponent(this.selectedText)},searchForTrends(){return this.urls.trends+"?q="+encodeURIComponent("api(cites_to_id="+this.templateVars.caseId+")")},copyCiteToSelection(){const i=`"${this.selectedText}" ${this.templateVars.fullCite}`;navigator.clipboard.writeText(i).then(()=>this.copyStatus="copied",()=>this.copyStatus="copy failed")},elideOrRedactSelection(i){confirm(`Really ${i} "${this.selectedText}"?`)&&w.post(this.urls.redact,{kind:i,text:this.selectedText},()=>{window.location.reload()})}}},N={};var j=M(D,W,$,!1,V,null,null,null);function V(i){for(let E in N)this[E]=N[E]}var q=function(){return j.exports}();O(()=>import("./modulepreload-polyfill.b7f2da20.js"),[]);new A({el:"#sidebar-menu-content",components:{Sidebar:q}});
//# sourceMappingURL=case.f1905b38.js.map
