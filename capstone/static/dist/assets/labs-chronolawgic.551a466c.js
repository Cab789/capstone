import{_ as B}from"./_commonjsHelpers.9baf49e8.js";import{V as _,n as o}from"./vueComponentNormalizer.7ffcf611.js";import{V as N}from"./vue-router.esm.c100b6d5.js";import{a as d,v as f,D as z}from"./index.0047c737.js";import{V as A}from"./vuex.esm.b9640af0.js";import{C as H}from"./case-result.5b9393b5.js";import{S as V,B as J,m as W}from"./search-button.f6f4499b.js";import{$ as C}from"./jquery.dbd78d0d.js";var K=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("svg",e._g({staticClass:"feather feather-minimize-2",attrs:{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}},e.$listeners),[t("polyline",{attrs:{points:"4 14 10 14 10 20"}}),t("polyline",{attrs:{points:"20 10 14 10 14 4"}}),t("line",{attrs:{x1:"14",y1:"10",x2:"21",y2:"3"}}),t("line",{attrs:{x1:"3",y1:"21",x2:"10",y2:"14"}})])},Z={render:K},G=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("svg",e._g({staticClass:"feather feather-maximize-2",attrs:{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}},e.$listeners),[t("polyline",{attrs:{points:"15 3 21 3 21 9"}}),t("polyline",{attrs:{points:"9 21 3 21 3 15"}}),t("line",{attrs:{x1:"21",y1:"3",x2:"14",y2:"10"}}),t("line",{attrs:{x1:"3",y1:"21",x2:"10",y2:"14"}})])},X={render:G},Q=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("svg",e._g({staticClass:"feather feather-plus-circle",attrs:{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"}},e.$listeners),[t("circle",{attrs:{cx:"12",cy:"12",r:"10"}}),e._v(" "),t("line",{attrs:{x1:"12",y1:"8",x2:"12",y2:"16"}}),e._v(" "),t("line",{attrs:{x1:"8",y1:"12",x2:"16",y2:"12"}})])},U={render:Q},ee=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("svg",e._g({staticClass:"feather feather-key",attrs:{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}},e.$listeners),[t("path",{attrs:{d:"M21 2l-2 2m-7.61 7.61a5.5 5.5 0 1 1-7.778 7.778 5.5 5.5 0 0 1 7.777-7.777zm0 0L15.5 7.5m0 0l3 3L22 7l-3-3m-3.5 3.5L19 4"}})])},te={render:ee};d.defaults.xsrfHeaderName="X-CSRFTOKEN";d.defaults.xsrfCookieName="csrftoken";const c=urls,p=choices,se=user;p.colors=["#00db67","#ccff6d","#dbc600","#db8f00","#ff8e7a","#ff736c","#e5435c","#986d81","#7e84ff","#3656f6","#2f2f2f","#3e667a","#00b7db","#c4c4c4"];const D=[];for(let e=0;e<p.jurisdictions.length;e++)D.push(p.jurisdictions[e][1]);p.jurisdictions=D;const q=[];for(let e=0;e<p.courts.length;e++)q.push({slug:p.courts[e][0],courtName:p.courts[e][1]});p.courts=q;function h(e){return e&&Object.prototype.hasOwnProperty.call(e,"response")&&Object.prototype.hasOwnProperty.call(e.response,"data")&&Object.prototype.hasOwnProperty.call(e.response.data,"reason")?Object.prototype.hasOwnProperty.call(e.response.data,"details")?e.response.data.reason+": "+e.response.data.details:e.response.data.reason:e}_.use(A);const n=new A.Store({state:{mobileEventsExpanded:!1,breakPoint:"lg",user:se,choices:p,requestStatus:"nominal",notificationMessage:null,urls:{chronolawgic:c.chronolawgic,chronolawgic_api_create:c.chronolawgic_api_create,chronolawgic_api_retrieve:c.chronolawgic_api_retrieve,chronolawgic_api_delete:c.chronolawgic_api_delete,chronolawgic_update_timeline_metadata:c.chronolawgic_update_timeline_metadata,chronolawgic_api_create_h2o:c.chronolawgic_api_create_h2o,api_delete_subobject:c.api_delete_subobject,api_add_update_subobject:c.api_add_update_subobject,api_update_categories:c.api_update_categories,static:c.static,api_root:c.api_root,contact:c.contact},availableTimelines:[],minimized:!0,id:1,title:"",description:"",createdBy:-1,isAuthor:!1,author:"",categories:[],events:[],cases:[],stats:[],firstYear:1900,lastYear:2e3,templateEvent:{name:"",short_description:"",long_description:"",start_date:"",end_date:"",url:"",color:""},templateCase:{},templateCategory:{},missingCases:{}},mutations:{expandMobileEvents(e){e.mobileEventsExpanded=!0},setBreakPoint(e,a){e.breakPoint=a},unExpandMobileEvents(e){e.mobileEventsExpanded=!1},toggleMinimized(e){e.minimized=!e.minimized},setAvailableTimelines(e,a){e.availableTimelines=a},setTimeline(e,a){e.title=a.title,e.author=a.author,e.description=a.description,e.categories=a.categories,e.events=a.events,e.cases=a.cases},setTimelineId(e,a){e.id=a},setCreatedBy(e,a){e.createdBy=a},setAuthor(e,a){e.isAuthor=a},setCategories(e,a){e.categories=a},setStats(e,a){e.stats=a},setFirstYear(e,a){e.firstYear=a},setLastYear(e,a){e.lastYear=a},setRequestStatus(e,a){e.requestStatus=a},setRequestStatusTerminal(e,a){e.requestStatus=a,setTimeout(function(){e.requestStatus="nominal"},5e3)},setNotificationMessage(e,a){e.notificationMessage=a,setTimeout(function(){e.notificationMessage=null},5e3)},addCase(e,a){a.id=this.generateUUID(),this.dispatch("requestAddUpdateSubobject",{subobject_type:"cases",subobject:a})},updateCase(e,a){this.dispatch("requestAddUpdateSubobject",{subobject_type:"cases",subobject:a})},deleteCase(e,a){this.dispatch("requestDeleteSubobject",{subobject_type:"cases",subobject_id:a})},addEvent(e,a){a.id=this.generateUUID(),this.dispatch("requestAddUpdateSubobject",{subobject_type:"events",subobject:a})},updateEvent(e,a){this.dispatch("requestAddUpdateSubobject",{subobject_type:"events",subobject:a})},deleteEvent(e,a){this.dispatch("requestDeleteSubobject",{subobject_type:"events",subobject_id:a})},updateCategories(e,a){a=a.map(t=>(Object.prototype.hasOwnProperty.call(t,"id")||(t.id=this.generateUUID()),t)),this.dispatch("requestUpdateCategories",a)},setMissingCases(e,a){e.missingCases=a}},getters:{breakPoint:e=>e.breakPoint,isMobile:e=>e.breakPoint==="xs"||e.breakPoint==="sm",mobileEventsExpanded:e=>e.mobileEventsExpanded,minimized:e=>e.minimized,cases:e=>e.cases,choices:e=>e.choices,availableTimelines:e=>e.availableTimelines,id:e=>e.id,requestStatus:e=>e.requestStatus,notificationMessage:e=>e.notificationMessage,templateEvent:e=>e.templateEvent,templateCase:e=>e.templateCase,templateCategory:e=>e.templateCategory,empty:e=>{if(e.requestStatus==="pending")return"pending";if(!Object.prototype.hasOwnProperty.call(e,"events")&&!Object.prototype.hasOwnProperty.call(e,"events"))return"empty";if(Object.prototype.hasOwnProperty.call(e,"events")){if(!Object.prototype.hasOwnProperty.call(e,"cases"))return e.events.length===0?"empty":"populated"}else return e.cases.length===0?"empty":"populated";return e.events.length+e.cases.length===0?"empty":"populated"},firstYear:e=>e.firstYear,lastYear:e=>e.lastYear,events:e=>e.events.sort((a,t)=>a.start_date>t.start_date?1:-1),eventByStartYear:e=>a=>e.events.filter(t=>new Date(t.start_date).getUTCFullYear()===a),casesByYear:e=>a=>e.cases.filter(t=>a===new Date(t.decision_date).getUTCFullYear()),timeline:e=>({title:e.title,author:e.author,events:e.events,cases:e.cases,categories:e.categories,description:e.description}),categories:e=>e.categories,category:e=>a=>e.categories.find(t=>t.id===a),randomColor:e=>e.colors[Math.floor(Math.random()*e.colors.length)],stats:e=>e.stats,missingCases:e=>e.missingCases},actions:{requestCreateTimeline:function({commit:e}){e("setRequestStatus","pending"),d.post(this.state.urls.chronolawgic_api_create).then(a=>a.data).then(a=>{a.status==="ok"&&this.dispatch("requestTimelineList")}).then(()=>{e("setRequestStatusTerminal","success"),e("setNotificationMessage","Timeline Created")}).catch(a=>{e("setRequestStatusTerminal","error"),e("setNotificationMessage","error creating timeline: "+h(a))})},requestDeleteTimeline:function({commit:e},a){e("setRequestStatus","pending"),d.delete(this.state.urls.chronolawgic_api_delete+a).then(t=>t.data).then(t=>{t.status==="ok"&&this.dispatch("requestTimelineList")}).then(()=>{e("setRequestStatusTerminal","success"),e("setNotificationMessage","Timeline Deleted")}).catch(t=>{e("setRequestStatusTerminal","error"),e("setNotificationMessage","error deleting timeline: "+h(t))})},requestDeleteSubobject:function({commit:e},{subobject_type:a,subobject_id:t}){e("setRequestStatus","pending");let s=this.state.urls.api_delete_subobject.replace("__TIMELINE_ID__",this.state.id).replace("__SUBOBJECT_ID__",t).replace("__SUBOBJECT_TYPE__",a);return d.delete(s,{headers:{"Content-Type":"application/json"}}).then(r=>r.data).then(r=>{r.status==="ok"&&(e("setTimeline",r.timeline),e("setStats",r.stats),e("setFirstYear",r.first_year),e("setLastYear",r.last_year),e("setRequestStatusTerminal","success"),e("setNotificationMessage",r.message))}).catch(r=>{e("setRequestStatusTerminal","error"),e("setNotificationMessage","error updating timeline: "+h(r))})},requestAddUpdateSubobject:function({commit:e},{subobject_type:a,subobject:t}){e("setRequestStatus","pending");let s=this.state.urls.api_add_update_subobject.replace("__TIMELINE_ID__",this.state.id).replace("__SUBOBJECT_TYPE__",a),r=JSON.stringify(t);return d.post(s,r,{headers:{"Content-Type":"application/json"}}).then(i=>i.data).then(i=>{i.status==="ok"&&(e("setTimeline",i.timeline),e("setStats",i.stats),e("setFirstYear",i.first_year),e("setLastYear",i.last_year),e("setRequestStatusTerminal","success"),e("setNotificationMessage",i.message))}).catch(i=>{e("setRequestStatusTerminal","error"),e("setNotificationMessage","error updating timeline: "+h(i))})},requestUpdateCategories:function({commit:e},a){e("setRequestStatus","pending");let t=this.state.urls.api_update_categories.replace("__TIMELINE_ID__",this.state.id),s=JSON.stringify(a);return d.post(t,s,{headers:{"Content-Type":"application/json"}}).then(r=>r.data).then(r=>{r.status=="ok"&&(e("setTimeline",r.timeline),e("setRequestStatusTerminal","success"),e("setNotificationMessage",r.message))}).catch(r=>{e("setRequestStatusTerminal","error"),e("setNotificationMessage","error updating categories: "+h(r))})},requestTimeline:function({commit:e},a){e("setTimelineId",""),e("setTimeline",{title:""}),e("setRequestStatus","pending"),d.get(this.state.urls.chronolawgic_api_retrieve+a).then(t=>t.data).then(t=>{t.status==="ok"&&(e("setTimelineId",t.id),e("setTimeline",t.timeline),e("setCreatedBy",t.created_by),e("setAuthor",t.is_owner),e("setStats",t.stats),e("setFirstYear",t.first_year),e("setLastYear",t.last_year))}).then(()=>{e("setRequestStatusTerminal","success")}).catch(t=>{e("setRequestStatusTerminal","error"),e("setNotificationMessage","error retrieving timeline: "+h(t))})},requestTimelineList:function({commit:e}){e("setRequestStatus","pending"),d.get(this.state.urls.chronolawgic_api_retrieve).then(a=>a.data).then(a=>{a.status==="ok"&&e("setAvailableTimelines",a.timelines)}).then(()=>{e("setRequestStatusTerminal","success")}).catch(a=>{e("setRequestStatusTerminal","error"),e("setNotificationMessage","error retrieving timeline list: "+h(a))})},requestUpdateTimelineMetadata:function({commit:e},a){e("setRequestStatus","pending");let t=a.author.trim(),s=JSON.stringify({title:a.title,author:t,description:a.description});return d.post(this.state.urls.chronolawgic_update_timeline_metadata.replace("__TIMELINE_ID__",a.id),s,{headers:{"Content-Type":"application/json"}}).then(r=>r.data).then(()=>{e("setRequestStatusTerminal","success"),e("setNotificationMessage","Change Saved")}).catch(r=>{e("setRequestStatusTerminal","error"),e("setNotificationMessage","error updating timeline: "+h(r))})},requestCreateH2OTimeline:function({commit:e},a){let t=JSON.stringify(a);return d.post(this.state.urls.chronolawgic_api_create_h2o,t,{headers:{"Content-Type":"application/json"}}).then(s=>s.data).then(s=>(s.status==="ok"&&this.dispatch("requestTimelineList"),e("setRequestStatusTerminal","success"),e("setNotificationMessage","Timeline Created"),s)).catch(s=>(e("setRequestStatusTerminal","error"),e("setNotificationMessage","error creating timeline: "+h(s)),s))}}});n.generateUUID=()=>"xxxxxxxxxx".replace(/[xy]/g,function(e){let a=Math.random()*16|0;return(e==="x"?a:a&3|8).toString(16)});var ae=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("svg",{attrs:{width:e.width,height:e.height,viewBox:"0 0 80 80","aria-labelledby":e.shapetype,fill:"none",xmlns:"http://www.w3.org/2000/svg"}},[t("title",{attrs:{lang:"en"},domProps:{textContent:e._s(e.title||e.shapetype+" icon")}}),e.shapetype==="circle"?[t("circle",{attrs:{cx:"33",cy:"40",r:"33",fill:e.color}})]:e.shapetype==="polygon1"?[t("path",{attrs:{d:"M32.3588 2.55166C36.9151 -0.758709 43.0849 -0.758709 47.6412 2.55166L74.2053 21.8516C78.7616 25.162 80.6682 31.0297 78.9278 36.386L68.7812 67.614C67.0409 72.9703 62.0494 76.5967 56.4175 76.5967H23.5825C17.9506 76.5967 12.9591 72.9703 11.2188 67.614L1.0722 36.386C-0.668168 31.0297 1.23839 25.162 5.79472 21.8516L32.3588 2.55166Z",fill:e.color}})]:e.shapetype==="polygon2"?[t("path",{attrs:{d:"M28.5 1.75278C32.5222 -0.569449 37.4778 -0.56945 41.5 1.75278L63.141 14.2472C67.1632 16.5694 69.641 20.8611 69.641 25.5056V50.4944C69.641 55.1389 67.1632 59.4306 63.141 61.7528L41.5 74.2472C37.4778 76.5694 32.5222 76.5694 28.5 74.2472L6.85898 61.7528C2.83677 59.4306 0.358982 55.1389 0.358982 50.4944V25.5056C0.358982 20.8611 2.83677 16.5694 6.85898 14.2472L28.5 1.75278Z",fill:e.color}})]:e.shapetype==="rhombus"?[t("path",{attrs:{d:"M33.636 3.36396C37.1508 -0.150754 42.8492 -0.150758 46.364 3.36396L76.636 33.636C80.1508 37.1508 80.1508 42.8492 76.636 46.364L46.364 76.636C42.8492 80.1508 37.1508 80.1508 33.636 76.636L3.36396 46.364C-0.150754 42.8492 -0.150758 37.1508 3.36396 33.636L33.636 3.36396Z",fill:e.color}})]:e.shapetype==="triangle"?[t("path",{attrs:{d:"M35.1362 4.5C38.6003 -1.5 47.2606 -1.5 50.7247 4.5L84.0666 62.25C87.5307 68.25 83.2006 75.75 76.2724 75.75H9.58846C2.66025 75.75 -1.66987 68.25 1.79423 62.25L35.1362 4.5Z",fill:e.color}})]:e._e()],2)},re=[];const ie={name:"shape-component",props:["shapetype","color","width","title"],data(){return{height:30,ratios:{circle:1,rhombus:.8,polygon1:.85,polygon2:.9,triangle:.7,rectangle:1}}},mounted(){this.height=this.width*this.ratios[this.shapetype]}},y={};var ne=o(ie,ae,re,!1,oe,null,null,null);function oe(e){for(let a in y)this[a]=y[a]}var m=function(){return ne.exports}(),le=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",{staticClass:"modal",attrs:{id:"add-case-modal",tabindex:"-1",role:"dialog"},on:{click:function(s){s.stopPropagation()}}},[t("div",{staticClass:"modal-dialog",attrs:{role:"document"}},[t("div",{staticClass:"modal-content"},[t("div",{staticClass:"modal-header"},[this.case&&this.case.name?t("h5",{staticClass:"modal-title"},[e._v(e._s(this.case.name))]):t("h5",{staticClass:"modal-title"},[e._v("ADD CASELAW")]),t("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"},on:{click:function(s){return s.stopPropagation(),e.closeModal.apply(null,arguments)}}},[t("span",{attrs:{"aria-hidden":"true"}},[e._v("\xD7")])])]),t("div",{staticClass:"modal-body"},[this.case&&typeof this.case.id=="number"?e._e():t("form",{attrs:{id:"form-search-cap"},on:{submit:function(s){s.stopPropagation(),s.preventDefault()}}},[t("h6",[e._v("Search CAP")]),t("div",{attrs:{id:"field-group-search"}},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.searchText,expression:"searchText"}],staticClass:"form-control",attrs:{id:"field-search-cap",placeholder:"Enter "+e.extraFields.cap.value},domProps:{value:e.searchText},on:{input:function(s){s.target.composing||(e.searchText=s.target.value)}}}),t("span",[e._v("Search using:")]),t("v-select",{attrs:{options:["Name abbreviation","Citation","Text search"],clearable:!1,placeholder:"search"},model:{value:e.extraFields.cap.value,callback:function(s){e.$set(e.extraFields.cap,"value",s)},expression:"extraFields.cap.value"}}),t("span",{staticClass:"button-container"},[t("search-button",{attrs:{showLoading:e.showLoading}})],1)],1),e.searchResults.length?t("ul",{staticClass:"results-list"},e._l(e.searchResults,function(s){return t("div",{key:s.id,staticClass:"result-container",class:e.chosenCase.id===s.id?"chosen":"",on:{click:function(r){return e.autofillCase(s)}}},[t("case-result",{attrs:{result:s}})],1)}),0):e._e(),e.showNoSearchResults?t("ul",{staticClass:"results-list"},[t("li",{staticClass:"result-container p-2"},[e._v("No results found")])]):e._e(),t("hr")]),t("form",{attrs:{id:"form-add-case"},on:{submit:function(s){s.stopPropagation()}}},[t("div",{staticClass:"form-label-group",attrs:{id:"field-group-url"}},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.newCase.url,expression:"newCase.url"}],staticClass:"form-control",attrs:{id:"field-url",placeholder:"URL"},domProps:{value:e.newCase.url},on:{input:function(s){s.target.composing||e.$set(e.newCase,"url",s.target.value)}}}),t("label",{attrs:{for:"field-url"}},[e._v("URL")])]),t("div",{staticClass:"form-label-group",attrs:{id:"field-group-citation"}},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.newCase.citation,expression:"newCase.citation"}],staticClass:"form-control",attrs:{id:"field-citation",placeholder:"Citation"},domProps:{value:e.newCase.citation},on:{input:function(s){s.target.composing||e.$set(e.newCase,"citation",s.target.value)}}}),t("label",{attrs:{for:"field-citation"}},[e._v("Citation")])]),t("div",{staticClass:"form-label-group",attrs:{id:"field-group-name"}},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.newCase.name,expression:"newCase.name"}],staticClass:"form-control",attrs:{id:"field-name",placeholder:"Case name",required:""},domProps:{value:e.newCase.name},on:{input:function(s){s.target.composing||e.$set(e.newCase,"name",s.target.value)}}}),t("label",{attrs:{for:"field-name"}},[e._v("Case name")])]),t("div",{staticClass:"form-label-group",attrs:{id:"field-group-short"}},[t("textarea",{directives:[{name:"model",rawName:"v-model",value:e.newCase.short_description,expression:"newCase.short_description"}],staticClass:"form-control",attrs:{id:"field-short-description",placeholder:"SHORT DESCRIPTION"},domProps:{value:e.newCase.short_description},on:{input:function(s){s.target.composing||e.$set(e.newCase,"short_description",s.target.value)}}})]),t("div",{staticClass:"form-label-group",attrs:{id:"field-group-date"}},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.newCase.decision_date,expression:"newCase.decision_date"}],staticClass:"form-control",attrs:{id:"field-decision-date",placeholder:"DECISION DATE",type:"date",required:""},domProps:{value:e.newCase.decision_date},on:{input:function(s){s.target.composing||e.$set(e.newCase,"decision_date",s.target.value)}}}),t("label",{attrs:{for:"field-decision-date"}},[e._v("DECISION DATE")])]),t("div",{staticClass:"form-label-group",attrs:{id:"field-group-long"}},[t("textarea",{directives:[{name:"model",rawName:"v-model",value:e.newCase.long_description,expression:"newCase.long_description"}],staticClass:"form-control",attrs:{id:"field-long-description",placeholder:"LONGER DESCRIPTION"},domProps:{value:e.newCase.long_description},on:{input:function(s){s.target.composing||e.$set(e.newCase,"long_description",s.target.value)}}})]),t("v-select",{attrs:{transition:"",id:"field-group-jurisdiction",label:"jurisdiction",placeholder:"Jurisdiction",options:e.choices.jurisdictions},on:{input:e.chooseJurisdiction},model:{value:e.newCase.jurisdiction,callback:function(s){e.$set(e.newCase,"jurisdiction",s)},expression:"newCase.jurisdiction"}}),t("v-select",{attrs:{transition:"",id:"field-group-court",label:"courtName",placeholder:"Court",options:e.choices.courts},model:{value:e.newCase.court,callback:function(s){e.$set(e.newCase,"court",s)},expression:"newCase.court"}}),t("v-select",{staticClass:"color-dropdown",attrs:{transition:"",label:"color",placeholder:"Border color",filterable:!1,clearable:!1,options:e.colors},on:{input:e.setSelected},scopedSlots:e._u([{key:"selected-option",fn:function(s){var r=s.color;return[t("span",{staticClass:"color-square",style:{backgroundColor:r}},[e._v(" "+e._s(r)+" ")])]}},{key:"option",fn:function(s){var r=s.color;return[t("span",{staticClass:"color-square",style:{backgroundColor:r}},[e._v(" "+e._s(r)+" ")])]}}]),model:{value:e.newCase.color,callback:function(s){e.$set(e.newCase,"color",s)},expression:"newCase.color"}}),t("v-select",{attrs:{multiple:"",id:"field-group-categories",filterable:!1,transition:"",label:"name",placeholder:"Categories",options:e.$store.state.categories},scopedSlots:e._u([{key:"selected-option",fn:function(s){var r=s.color,i=s.shape,l=s.name;return[t("shape-component",{attrs:{width:20,color:r,shapetype:i}}),t("span",{domProps:{textContent:e._s(l)}})]}},{key:"option",fn:function(s){var r=s.color,i=s.shape,l=s.name;return[t("shape-component",{attrs:{width:28,color:r,shapetype:i}}),t("span",{domProps:{textContent:e._s(l)}})]}}]),model:{value:e.newCase.categories,callback:function(s){e.$set(e.newCase,"categories",s)},expression:"newCase.categories"}})],1),e.errors.length?t("div",{staticClass:"form-errors p-2 mt-2 small"},[t("b",[e._v("Please correct the following error(s):")]),t("ul",{staticClass:"m-0 list-inline"},e._l(e.errors,function(s){return t("li",{key:s,staticClass:"list-inline-item"},[e._v(e._s(s))])}),0)]):e._e()]),t("div",{staticClass:"modal-footer"},[t("button",{staticClass:"btn btn-tertiary",attrs:{type:"button","data-dismiss":"modal"},on:{click:function(s){return s.stopPropagation(),e.closeModal.apply(null,arguments)}}},[e._v(" Cancel ")]),this.case&&this.case.name?[t("button",{staticClass:"btn btn-primary",attrs:{type:"button","data-dismiss":"modal"},on:{click:e.deleteCase}},[e._v(" Delete ")]),t("button",{staticClass:"btn btn-primary",attrs:{type:"button","data-dismiss":"modal"},on:{click:function(s){return s.stopPropagation(),e.updateCase.apply(null,arguments)}}},[e._v(" Update ")])]:[t("button",{staticClass:"btn btn-primary btn-highlight",attrs:{type:"button","data-dismiss":"modal"},on:{click:function(s){return s.stopPropagation(),e.addCase.apply(null,arguments)}}},[e._v(" ADD ")])]],2)])])])},ce=[];const de={name:"add-case-modal",components:{vSelect:f,CaseResult:H,SearchButton:V,ShapeComponent:m},props:["shown","modal","case"],data(){return{choices:{},searchResults:[],showNoSearchResults:!1,searchText:"",chosenCase:{},newCase:{},errors:[],colors:[],extraFields:{cap:{name:"search by",label:"Name abbreviation",value:"Name abbreviation"}},showLoading:!1,categories:[]}},methods:{checkForm(){this.errors=[],this.newCase.name||this.errors.push("Case name is required."),this.newCase.decision_date||this.errors.push("Decision date is required."),this.newCase.url&&!this.checkUrl(this.newCase.url)&&(!/^https?:\/\//i.test(this.newCase.url)&&this.checkUrl("https://"+this.newCase.url)?this.newCase.url="https://"+this.newCase.url:this.errors.push("URL is not valid."))},closeModal(){this.$parent.closeModal(),this.setupCase()},updateCase(){if(this.checkForm(),this.errors.length)return;let e=this.unbind(this.newCase);e.jurisdiction||(e.jurisdiction=""),e.court||(e.court=""),e.categories=e.categories.map(a=>a.id),n.commit("updateCase",e),this.closeModal()},addCase(){if(this.checkForm(),this.errors.length)return;let e=this.unbind(this.newCase);e.categories=e.categories.map(a=>a.id),n.commit("addCase",e),this.closeModal()},deleteCase(){n.commit("deleteCase",this.case.id),this.closeModal()},chooseCase(e){this.chosenCase=e},setSelected(e){this.newCase.color=e},formatDate(e){let a=e.split("-"),t=a[0],s=a.length===3?a[2]:"01",r=a.length>=2?a[1]:"01";return t+"-"+r+"-"+s},autofillCase(e){this.chosenCase=e,this.newCase.name=this.chosenCase.name_abbreviation,this.newCase.citation=this.chosenCase.citations[0].cite,this.newCase.url=this.chosenCase.frontend_url,this.newCase.decision_date=this.formatDate(this.chosenCase.decision_date),this.newCase.jurisdiction=this.chosenCase.jurisdiction.name_long,this.newCase.court=this.chosenCase.court.name},searchCAP(){if(this.showNoSearchResults=!1,this.searchText){this.showLoading=!0;let e;this.extraFields.cap.value==="Citation"?e="cite":this.extraFields.cap.value==="Name abbreviation"?e="name_abbreviation":e="search";let a=n.state.urls.api_root+"cases?"+e+"="+this.searchText;d.get(a).then(t=>t.data).then(t=>{this.searchResults=t.results,this.searchResults.length===0&&(this.showNoSearchResults=!0),this.showLoading=!1})}},valueUpdated(){this.searchCAP()},clearContent(){this.closeModal(),this.setupCase()},unbind(e){return JSON.parse(JSON.stringify(e))},hydrateCategories(e=[]){let a=[];for(let t=0;t<e.length;t++){let s=n.getters.category(e[t]);s&&a.push(s)}return a},setupCase(e){this.newCase=e?this.unbind(this.case):this.unbind(n.getters.templateCase),this.newCase.categories=this.hydrateCategories(this.newCase.categories)},chooseJurisdiction(e){e&&(this.newCase.jurisdiction=e),this.newCase=this.unbind(this.newCase)},chooseCourt(e){e&&(this.newCase.court=e.courtName),this.newCase=this.unbind(this.newCase)},checkUrl(e){try{new URL(e)}catch{return!1}return e.includes(".")}},watch:{case(e){this.setupCase(e)}},beforeMount(){this.colors=n.getters.choices.colors,this.choices=n.getters.choices,this.categories=n.getters.categories,this.setupCase(this.case)}},b={};var ue=o(de,le,ce,!1,he,null,null,null);function he(e){for(let a in b)this[a]=b[a]}var pe=function(){return ue.exports}();var ve=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",{staticClass:"modal",attrs:{id:"add-event-modal",tabindex:"-1",role:"dialog"},on:{click:function(s){s.stopPropagation()}}},[t("div",{staticClass:"modal-dialog",attrs:{role:"document"}},[t("div",{staticClass:"modal-content"},[t("div",{staticClass:"modal-header"},[this.event&&this.event.name?t("h5",{staticClass:"modal-title"},[e._v(e._s(this.event.name))]):t("h5",{staticClass:"modal-title"},[e._v("ADD EVENT")]),t("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"},on:{click:function(s){return s.stopPropagation(),e.closeModal.apply(null,arguments)}}},[t("span",{attrs:{"aria-hidden":"true"}},[e._v("\xD7")])])]),t("div",{staticClass:"modal-body"},[t("form",{on:{click:function(s){s.stopPropagation(),s.preventDefault()},submit:function(s){return s.preventDefault(),e.addEvent.apply(null,arguments)}}},[t("div",{staticClass:"form-label-group",attrs:{id:"field-group-name"}},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.newEvent.name,expression:"newEvent.name"}],staticClass:"form-control",attrs:{id:"field-event-name",placeholder:"NAME",required:""},domProps:{value:e.newEvent.name},on:{input:function(s){s.target.composing||e.$set(e.newEvent,"name",s.target.value)}}}),t("label",{attrs:{for:"field-event-name"}},[e._v("EVENT NAME")])]),t("div",{staticClass:"form-label-group",attrs:{id:"field-group-url"}},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.newEvent.url,expression:"newEvent.url"}],staticClass:"form-control",attrs:{id:"field-event-url",placeholder:"URL"},domProps:{value:e.newEvent.url},on:{input:function(s){s.target.composing||e.$set(e.newEvent,"url",s.target.value)}}}),t("label",{attrs:{for:"field-event-url"}},[e._v("SOURCE URL")])]),t("div",{staticClass:"form-label-group",attrs:{id:"field-group-short-description"}},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.newEvent.short_description,expression:"newEvent.short_description"}],staticClass:"form-control",attrs:{id:"field-event-short-description",placeholder:"SHORT DESCRIPTION"},domProps:{value:e.newEvent.short_description},on:{input:function(s){s.target.composing||e.$set(e.newEvent,"short_description",s.target.value)}}}),t("label",{attrs:{for:"field-event-short-description"}},[e._v("SHORT DESCRIPTION")])]),t("div",{staticClass:"form-label-group",attrs:{id:"field-group-start-date"}},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.newEvent.start_date,expression:"newEvent.start_date"}],staticClass:"form-control",attrs:{id:"field-event-start-date",placeholder:"DECISION DATE",type:"date",required:""},domProps:{value:e.newEvent.start_date},on:{input:function(s){s.target.composing||e.$set(e.newEvent,"start_date",s.target.value)}}}),t("label",{attrs:{for:"field-event-start-date"}},[e._v("START DATE")])]),t("div",{staticClass:"form-label-group",attrs:{id:"field-group-long-description"}},[t("textarea",{directives:[{name:"model",rawName:"v-model",value:e.newEvent.long_description,expression:"newEvent.long_description"}],staticClass:"form-control",attrs:{id:"field-event-long-description",placeholder:"LONGER DESCRIPTION"},domProps:{value:e.newEvent.long_description},on:{input:function(s){s.target.composing||e.$set(e.newEvent,"long_description",s.target.value)}}})]),t("div",{staticClass:"form-label-group",attrs:{id:"field-group-end-date"}},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.newEvent.end_date,expression:"newEvent.end_date"}],staticClass:"form-control",attrs:{id:"field-event-end-date",placeholder:"DECISION DATE",type:"date"},domProps:{value:e.newEvent.end_date},on:{input:function(s){s.target.composing||e.$set(e.newEvent,"end_date",s.target.value)}}}),t("label",{attrs:{for:"field-event-start-date"}},[e._v("END DATE")])]),t("v-select",{staticClass:"color-dropdown",attrs:{transition:"",label:"color",filterable:!1,clearable:!1,options:e.colors},on:{input:e.setSelected},scopedSlots:e._u([{key:"selected-option",fn:function(s){var r=s.color;return[e._v(" color: "),t("span",{staticClass:"color-square",style:{backgroundColor:r}},[e._v(" "+e._s(r)+" ")])]}},{key:"option",fn:function(s){var r=s.color;return[t("span",{staticClass:"color-square",style:{backgroundColor:r}},[e._v(" "+e._s(r)+" ")])]}}]),model:{value:e.newEvent.color,callback:function(s){e.$set(e.newEvent,"color",s)},expression:"newEvent.color"}})],1),e.errors.length?t("div",{staticClass:"form-errors p-2 mt-2 small"},[t("b",[e._v("Please correct the following error(s):")]),t("ul",{staticClass:"m-0 list-inline"},e._l(e.errors,function(s){return t("li",{key:s,staticClass:"list-inline-item"},[e._v(e._s(s))])}),0)]):e._e()]),t("div",{staticClass:"modal-footer"},[t("button",{staticClass:"btn btn-tertiary",attrs:{type:"button","data-dismiss":"modal"},on:{click:function(s){return s.stopPropagation(),e.closeModal.apply(null,arguments)}}},[e._v(" Cancel ")]),this.event&&this.event.id?[t("button",{staticClass:"btn btn-primary",attrs:{type:"button","data-dismiss":"modal"},on:{click:e.deleteEvent}},[e._v(" Delete ")]),t("button",{staticClass:"btn btn-primary",attrs:{type:"button","data-dismiss":"modal"},on:{click:function(s){return s.stopPropagation(),e.updateEvent.apply(null,arguments)}}},[e._v(" Update ")])]:e._e(),!this.event||!this.event.name?[t("button",{staticClass:"btn btn-primary",attrs:{type:"button","data-dismiss":e.$parent.showEvent?"none":"modal"},on:{click:function(s){return s.stopPropagation(),e.addEvent.apply(null,arguments)}}},[e._v("ADD ")])]:e._e()],2)])])])},_e=[];const me={name:"add-event-modal",props:["shown","modal","event"],components:{vSelect:f},data(){return{colors:[],newEvent:{},errors:[]}},methods:{getRandomColor(){return this.colors[Math.floor(Math.random()*this.colors.length)]},clearContent(){this.newEvent=n.getters.templateEvent},checkForm(){this.errors=[],this.newEvent.name||this.errors.push("Event name is required."),this.newEvent.start_date||this.errors.push("Start date is required."),this.newEvent.end_date||this.errors.push("End date is required."),new Date(this.newEvent.end_date)-new Date(this.newEvent.start_date)<0&&this.errors.push("Start date must be earlier than end date."),this.newEvent.url&&!this.checkUrl(this.newEvent.url)&&(!/^https?:\/\//i.test(this.newEvent.url)&&this.checkUrl("https://"+this.newEvent.url)?this.newEvent.url="https://"+this.newEvent.url:this.errors.push("URL is not valid."))},closeModal(){this.$parent.closeModal(),this.setupEvent()},addEvent(){this.checkForm(),!this.errors.length&&(n.commit("addEvent",this.newEvent),this.closeModal())},deleteEvent(){n.commit("deleteEvent",this.event.id),this.closeModal()},updateEvent(){if(this.checkForm(),this.errors.length)return;let e=this.unbind(this.newEvent);n.commit("updateEvent",e),this.closeModal()},unbind(e){return JSON.parse(JSON.stringify(e))},setupEvent(e){this.newEvent=e?this.unbind(this.event):this.unbind(n.getters.templateEvent),this.newEvent.color||(this.newEvent.color=this.getRandomColor())},setSelected(e){this.newEvent.color=e,this.newEvent=this.unbind(this.newEvent)},checkUrl(e){try{new URL(e)}catch{return!1}return e.includes(".")}},watch:{event(e){this.setupEvent(e)}},mounted(){this.colors=n.getters.choices.colors,this.setupEvent(this.event)}},w={};var ge=o(me,ve,_e,!1,fe,null,null,null);function fe(e){for(let a in w)this[a]=w[a]}var Ce=function(){return ge.exports}(),ye=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",{staticClass:"modal",attrs:{id:"readonly-modal",tabindex:"-1",role:"dialog"},on:{click:function(s){s.stopPropagation()}}},[t("div",{staticClass:"modal-dialog",attrs:{role:"document"}},[t("div",{staticClass:"modal-content"},[t("div",{staticClass:"modal-header"},[t("h5",{staticClass:"modal-title"},[e._v(e._s(e.event.name))]),t("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"},on:{click:function(s){return s.stopPropagation(),e.closeModal.apply(null,arguments)}}},[t("span",{attrs:{"aria-hidden":"true"}},[e._v("\xD7")])])]),t("div",{staticClass:"modal-body"},[t("article",{staticClass:"info"},[e.categories&&e.categories.length?t("p",[t("span",{staticClass:"label"},[e._v("Categories: ")]),t("ul",{staticClass:"list-inline"},e._l(e.categories,function(s){return t("li",{key:s.id,staticClass:"list-inline-item"},[t("shape-component",{attrs:{width:24,color:s.color,shapetype:s.shape}}),t("span",{staticClass:"category-name",domProps:{textContent:e._s(s.name)}})],1)}),0)]):e._e(),e.event.url?t("p",[t("span",{staticClass:"label"},[e._v("Source: ")]),t("a",{attrs:{href:e.event.url,target:"_blank"}},[e._v(e._s(e.domain))])]):e._e(),e.event.citation?t("p",[t("span",{staticClass:"label"},[e._v("Citation: ")]),e._v(" "+e._s(e.event.citation)+" ")]):e._e(),e.event.decision_date?t("p",[t("span",{staticClass:"label"},[e._v("Decision date: ")]),e._v(" "+e._s(e.event.decision_date)+" ")]):e._e(),e.event.start_date?t("p",[t("span",{staticClass:"label"},[e._v("Start date: ")]),e._v(" "+e._s(e.event.start_date)+" ")]):e._e(),e.event.end_date?t("p",[t("span",{staticClass:"label"},[e._v("End date: ")]),e._v(" "+e._s(e.event.end_date)+" ")]):e._e(),e.event.short_description?t("p",{staticClass:"short-description"},[e._v(" "+e._s(e.event.short_description)+" ")]):e._e()]),e.event.short_description&&e.event.long_description?t("hr"):e._e(),e.event.long_description?t("div",{staticClass:"long-description"},e._l(e.event.long_description.split(`
`),function(s,r){return t("p",{key:r},[e._v(" "+e._s(s)+" ")])}),0):e._e()]),t("div",{staticClass:"modal-footer"},[t("button",{staticClass:"btn btn-tertiary",attrs:{type:"button","data-dismiss":"modal"},on:{click:function(s){return s.stopPropagation(),e.closeModal.apply(null,arguments)}}},[e._v(" Close ")])])])])])},be=[];const we={name:"readonly-modal",props:["modal","event","shown"],components:{ShapeComponent:m},data(){return{domain:"",categories:[]}},watch:{event:{handler(e){this.event.categories=e.categories,this.hydrateCategories()},deep:!0}},methods:{closeModal(){this.$parent.closeModal()},hydrateCategories(){if(this.categories=[],!!this.event.categories)for(let e=0;e<this.event.categories.length;e++)this.categories.push(n.getters.categories.find(a=>a.id===this.event.categories[e]))}},mounted(){if(this.event.url){let e=new URL(this.event.url);this.domain=e.hostname}this.hydrateCategories()}},k={};var ke=o(we,ye,be,!1,$e,"7f01315a",null,null);function $e(e){for(let a in k)this[a]=k[a]}var Ee=function(){return ke.exports}(),xe=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",{staticClass:"spans row",on:{click:function(s){return e.$store.commit("expandMobileEvents")}}},e._l(e.event_list,function(s,r){return t("div",{key:e.year_value+r,class:["event_col","ec_"+(r+1),"col-1","e"+e.year_value],attrs:{title:s.name}},[e.$store.getters.isMobile&&!e.$store.getters.mobileEventsExpanded?[Object.keys(s).length>0?t("div",{class:{fill:!0,"first-event-year":parseInt(e.year_value)===new Date(s.start_date).getUTCFullYear(),"last-event-year":parseInt(e.year_value)===new Date(s.end_date).getUTCFullYear(),"light-color":e.checkIfLight(s.color)},style:{"background-color":s.color,"border-bottom":parseInt(e.year_value)===new Date(s.end_date).getUTCFullYear()?"1rem solid gray":"","min-height":"1rem"},attrs:{tabindex:parseInt(e.year_value)===new Date(s.start_date).getUTCFullYear()?"0":"-1"},on:{click:function(i){return e.$store.commit("expandMobileEvents")}}}):e._e()]:[Object.keys(s).length>0?t("button",{ref:e.fillRefGenerator(s,e.year_value),refInFor:!0,class:{fill:!0,"first-event-year":parseInt(e.year_value)===new Date(s.start_date).getUTCFullYear(),"last-event-year":parseInt(e.year_value)===new Date(s.end_date).getUTCFullYear(),"light-color":e.checkIfLight(s.color)},style:{"background-color":s.color,"border-bottom":parseInt(e.year_value)===new Date(s.end_date).getUTCFullYear()?"1rem solid gray":"","min-height":"1rem"},attrs:{tabindex:parseInt(e.year_value)===new Date(s.start_date).getUTCFullYear()?"0":"-1","data-toggle":"modal","data-target":e.dataTarget,"data-event-fill":s.id},on:{click:function(i){return e.openModal(s)}}},[parseInt(e.year_value)===new Date(s.start_date).getUTCFullYear()?t("div",{ref:"event-label"+s.id,refInFor:!0,staticClass:"event_label",style:{width:e.setLabelWidth(s.end_date,s.start_date)},domProps:{textContent:e._s(s.name)}}):e._e()]):e._e()]],2)}),0)},Me=[];const Te={name:"TimelineSlice",props:["year_value","event_list"],computed:{dataTarget:()=>n.getters.isMobile||!n.state.isAuthor?"#readonly-modal":"#add-event-modal"},methods:{closeModal(){this.$emit("closeModal")},openModal(e){this.$parent.$parent.openModal(e,"event")},fillRefGenerator(e,a){const t=parseInt(a)===new Date(e.start_date).getUTCFullYear(),s=parseInt(a)===new Date(e.end_date).getUTCFullYear();if(t===a)return"first_year_fill_"+e.id;if(s===a)return"last_year_fill_"+e.id},setLabelWidth(e,a){let t=new Date(e).getUTCFullYear()-new Date(a).getUTCFullYear(),s=110,r;return r=t*s,r=r<s?s:r,r+"px"},checkIfLight(e){return["#00db67","#ccff6d","#dbc600","#db8f00"].indexOf(e.toLowerCase())>-1}}},$={};var Se=o(Te,xe,Me,!1,Re,null,null,null);function Re(e){for(let a in $)this[a]=$[a]}var Oe=function(){return Se.exports}(),Le=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("svg",e._g({attrs:{xmlns:"http://www.w3.org/2000/svg",height:"24",viewBox:"0 0 24 24",width:"24"}},e.$listeners),[t("path",{attrs:{d:"M0 0h24v24H0z",fill:"none"}}),t("path",{attrs:{d:"M19 19H5V5h7V3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2v-7h-2v7zM14 3v2h3.59l-9.83 9.83 1.41 1.41L19 6.41V10h2V3h-7z"}})])},Pe={render:Le};const v=new _;var je=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("button",{staticClass:"case-button",attrs:{type:"button","data-toggle":"modal","data-target":e.dataTarget,tabindex:"0"},on:{click:function(s){return e.openModal(e.case_data)}}},[t("article",{staticClass:"case"},[t("div",{staticClass:"border",style:{backgroundColor:e.case_data.color}}),t("header",[t("span",{staticClass:"case-name"},[e._v(" "+e._s(e.case_data.name)+" ")]),e.case_data.url?t("a",{staticClass:"case-link",attrs:{href:e.case_data.url,target:"_blank"},on:{click:function(s){s.stopPropagation()}}},[t("link-case")],1):e._e()]),t("section",{staticClass:"desc"},[e._v(" "+e._s(e.case_data.short_description)+" ")]),e.categories&&e.categories.length?t("div",{staticClass:"categories"},[t("ul",{staticClass:"list-inline"},e._l(e.categories,function(s){return t("li",{key:s.id,staticClass:"list-inline-item",attrs:{title:"category.name"}},[t("shape-component",{attrs:{width:20,title:s.name,color:s.color,shapetype:s.shape}})],1)}),0)]):e._e()])])},Ne=[];const Ae={name:"Case",props:["case_data","year_value"],components:{LinkCase:Pe,ShapeComponent:m},computed:{dataTarget:()=>n.getters.isMobile||!n.state.isAuthor?"#readonly-modal":"#add-case-modal"},watch:{case_data:{handler(e){this.case_data.categories=e.categories,this.hydrateCategories()},deep:!0}},data(){return{categories:[],timelineCategories:n.getters.categories}},methods:{openModal(e){this.$parent.$parent.openModal(e,"case")},closeModal(){v.$emit("closeModal")},hydrateCategories(){this.categories=[];for(let e=0;e<this.case_data.categories.length;e++){let a=this.timelineCategories.find(t=>t.id===this.case_data.categories[e]);a&&this.categories.push(a)}}},mounted(){this.case_data.categories&&this.hydrateCategories(),v.$on("updateCategories",e=>{!this.case_data.categories||(this.timelineCategories=e,this.hydrateCategories())})}},E={};var Ue=o(Ae,je,Ne,!1,De,null,null,null);function De(e){for(let a in E)this[a]=E[a]}var qe=function(){return Ue.exports}(),Ie=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("svg",e._g({staticClass:"feather feather-more-vertical",attrs:{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}},e.$listeners),[t("circle",{attrs:{cx:"12",cy:"12",r:"1"}}),t("circle",{attrs:{cx:"12",cy:"5",r:"1"}}),t("circle",{attrs:{cx:"12",cy:"19",r:"1"}})])},Fe={render:Ie},Ye=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("svg",e._g({staticClass:"feather feather-more-horizontal",attrs:{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}},e.$listeners),[t("circle",{attrs:{cx:"12",cy:"12",r:"1"}}),t("circle",{attrs:{cx:"19",cy:"12",r:"1"}}),t("circle",{attrs:{cx:"5",cy:"12",r:"1"}})])},Be={render:Ye},ze=_.component("YearLabel",{template:`
    <svg version="1.1" id="Layer_1" width="125px" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 250 125" xml:space="preserve" @mouseover="yearHoverToggle(true)" @mouseleave="yearHoverToggle(false)">
      <rect style="fill:#FFFFFF;" x="0" y="34" height="60" width="178" />
      <line v-if="!yearHover" style="fill:none;stroke:#363636;stroke-width:4;stroke-miterlimit:10;" x1="29.5" y1="62.5" x2="50.5" y2="62.5"/>
      <text style="font-family: 'source-code', monospace;" transform="matrix(2 0 0 2 80 75)" >{{year}}</text>
      <g id="circles" v-if="yearHover">
        <g style="cursor:pointer;" @click="addCase(year)" data-toggle="modal" data-target="#add-case-modal">
          <circle style="fill:#FFF;stroke:#363636;stroke-width:3;stroke-miterlimit:10;" cx="40" cy="63.2" r="20"/>
          <line style="fill:none;stroke:#363636;stroke-width:3;stroke-miterlimit:10;" x1="40" y1="52" x2="40" y2="73"/>
          <line style="fill:none;stroke:#363636;stroke-width:3;stroke-miterlimit:10;" x1="29.5" y1="62.5" x2="50.5" y2="62.5"/>
        </g>
        <g style="cursor:pointer;" @click="addEvent(year)" data-toggle="modal" data-target="#add-event-modal">
          <circle style="fill:#EEE;stroke:#363636;stroke-width:3;stroke-miterlimit:10;" cx="210" cy="63.2" r="20"/>
          <line style="fill:none;stroke:#363636;stroke-width:3;stroke-miterlimit:10;" x1="210" y1="52" x2="210" y2="73"/>
          <line style="fill:none;stroke:#363636;stroke-width:3;stroke-miterlimit:10;" x1="199.5" y1="62.5" x2="220.5" y2="62.5"/>
        </g>
      </g>
    </svg>`,props:["year"],data(){return{yearHover:!1}},methods:{addCase(e){this.$parent.$parent.openModal({decision_date:e+"-01-01"},"case")},addEvent(e){this.$parent.$parent.openModal({start_date:e+"-01-01"},"event")},yearHoverToggle(e){this.yearHover=this.$store.state.isAuthor?e:!1}}}),He=function(){var e=this,a=e.$createElement,t=e._self._c||a;return e.year_data.involvesAnyItem||!e.$store.getters.minimized?t("div",{ref:e.year_value,staticClass:"year",class:{no_content_year:e.noContent,cases_only_year:e.casesWithoutEvents,events_only_year:e.eventsWithoutCases,cases_and_events_year:e.casesAndEvents},attrs:{"aria-label":e.year_value},on:{keydown:function(s){return!s.type.indexOf("key")&&e._k(s.keyCode,"esc",27,s.key,["Esc","Escape"])?null:e.clearPreviewEvent.apply(null,arguments)}}},[e.$store.getters.isMobile&&e.$store.getters.mobileEventsExpanded?t("div",{staticClass:"incidental",on:{click:function(s){return e.$store.commit("unExpandMobileEvents")}}},[e.year_data.case_list.length>0?t("div",{staticClass:"case_placeholder"},[t("more-horizontal"),t("span",{staticClass:"case_count"},[e._v(e._s(e.year_data.case_list.length))])],1):e._e()]):t("div",{staticClass:"incidental"},e._l(e.year_data.case_list,function(s){return t("case",{key:s.id,attrs:{year_value:e.year_value,case_data:s}})}),1),e.$store.getters.isMobile?t("div",{staticClass:"year_scale"},[t("div",{staticClass:"simple-mobile-year-label"},[e._v(e._s(e.year_value))])]):t("div",{staticClass:"year_scale"},[t("year-label",{attrs:{year:e.year_value}})],1),t("TimeLineSlice",{attrs:{event_list:e.year_data.event_list,year_value:e.year_value}})],1):e.year_data.firstYearNoNewItems&&!e.year_data.involvesAnyItem&&e.$store.getters.minimized?t("div",{staticClass:"year placeholder"},[t("div",{staticClass:"incidental",on:{click:function(s){return e.$store.commit("unExpandMobileEvents")}}}),t("div",{staticClass:"year_scale",on:{click:function(s){return e.$store.commit("toggleMinimized")}}},[t("more-vertical")],1),t("div",{staticClass:"spans",on:{click:function(s){return e.$store.commit("expandMobileEvents")}}})]):e._e()},Ve=[];const Je={name:"Year",components:{TimeLineSlice:Oe,Case:qe,MoreVertical:Fe,MoreHorizontal:Be,YearLabel:ze},data(){return{event_count:this.year_data.event_list.reduce((e,a)=>e+Object.keys(a).length,0),event:null,showAddButton:!1}},props:["year_data","year_value","mobileEventsExpanded"],computed:{noContent:function(){return this.event_count+this.year_data.case_list.length===0},casesWithoutEvents:function(){return this.event_count===0&&this.year_data.case_list.length>0},eventsWithoutCases:function(){return this.event_count>0&&this.year_data.case_list.length===0},casesAndEvents:function(){return this.event_count>0&&this.year_data.case_list.length>0}},methods:{clearPreviewEvent(){this.event=null}},mounted(){v.$on("goToYear",e=>{_.nextTick().then(()=>{this.$refs[e]&&(this.$store.getters.isMobile||this.$el.scrollIntoView())})})}},x={};var We=o(Je,He,Ve,!1,Ke,null,null,null);function Ke(e){for(let a in x)this[a]=x[a]}var Ze=function(){return We.exports}(),Ge=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("li",{staticClass:"category"},[t("v-select",{staticClass:"shape-select",attrs:{options:e.shapes,transition:"",filterable:!1,clearable:!1,label:"shape"},scopedSlots:e._u([{key:"selected-option",fn:function(s){var r=s.shape;return[t("shape-component",{attrs:{width:28,color:e.content.color,shapetype:r}})]}},{key:"option",fn:function(s){var r=s.shape;return[t("shape-component",{attrs:{width:28,color:e.content.color,shapetype:r}})]}}]),model:{value:e.content.shape,callback:function(s){e.$set(e.content,"shape",s)},expression:"content.shape"}}),t("input",{directives:[{name:"model",rawName:"v-model",value:e.content.name,expression:"content.name"}],staticClass:"shape-name",attrs:{required:""},domProps:{value:e.content.name},on:{input:function(s){s.target.composing||e.$set(e.content,"name",s.target.value)}}}),t("v-select",{staticClass:"color-dropdown shape-color",attrs:{transition:"",filterable:!1,clearable:!1,label:"color",options:e.colors},scopedSlots:e._u([{key:"selected-option",fn:function(s){var r=s.color;return[t("span",{staticClass:"color-square",style:{backgroundColor:r}})]}},{key:"option",fn:function(s){var r=s.color;return[t("span",{staticClass:"color-square",style:{backgroundColor:r}})]}}]),model:{value:e.content.color,callback:function(s){e.$set(e.content,"color",s)},expression:"content.color"}}),t("button",{staticClass:"close category-remove",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"},on:{click:function(s){return e.$parent.removeCategory(e.content.id)}}},[t("span",{attrs:{"aria-hidden":"true"}},[e._v("\xD7")])])],1)},Xe=[];const Qe={name:"category",props:["content"],components:{vSelect:f,ShapeComponent:m},data(){return{shapes:["circle","polygon1","polygon2","rhombus","triangle"],colors:[]}},methods:{getRandom(e){return e[Math.floor(Math.random()*e.length)]}},mounted(){this.colors=n.getters.choices.colors,this.content.shape||(this.content.shape=this.getRandom(this.shapes)),this.content.color||(this.content.color=this.getRandom(this.colors))}},M={};var et=o(Qe,Ge,Xe,!1,tt,"30fdeb00",null,null);function tt(e){for(let a in M)this[a]=M[a]}var st=function(){return et.exports}(),at=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",{attrs:{id:"categories-modal",tabindex:"-1",role:"dialog"}},[t("div",{staticClass:"categories-modal-dialog"},[t("div",{staticClass:"modal-content"},[t("div",{staticClass:"modal-header"},[t("h5",{staticClass:"modal-title"},[e._v("CATEGORIES")]),t("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"},on:{click:function(s){return s.stopPropagation(),e.$parent.toggleKey()}}},[t("span",{attrs:{"aria-hidden":"true"}},[e._v("\xD7")])])]),this.$store.state.isAuthor?t("div",{staticClass:"modal-body"},[t("ul",[e._m(0),e._l(e.categoryList,function(s,r){return t("category",{key:r,attrs:{content:s}})})],2),t("div",{staticClass:"btn-group"},[t("button",{staticClass:"btn btn-tertiary",on:{click:e.addCategoryFields}},[e._v("New "),t("add-icon")],1),t("button",{staticClass:"btn btn-tertiary",on:{click:e.$parent.toggleKey}},[e._v("Cancel")]),t("button",{staticClass:"btn btn-primary",on:{click:e.saveCategories}},[e._v("Save")])]),e.errors.length?t("div",{staticClass:"form-errors p-2 mt-2 small"},[t("b",[e._v("Please correct the following error(s):")]),t("ul",{staticClass:"m-0 list-inline"},e._l(e.errors,function(s){return t("li",{key:s,staticClass:"list-inline-item"},[e._v(e._s(s))])}),0)]):e._e()]):t("div",{staticClass:"modal-body"},[t("ul",e._l(e.categoryList,function(s,r){return t("li",{key:r,staticClass:"category-readonly"},[t("span",[t("shape-component",{attrs:{width:28,color:s.color,shapetype:s.shape}})],1),t("span",{staticClass:"name",domProps:{textContent:e._s(s.name)}})])}),0)])])])])},rt=[function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("li",{staticClass:"category"},[t("span",{attrs:{id:"shape-label"}},[e._v("Shape")]),t("span",{attrs:{id:"input-label"}},[e._v("Name")]),t("span",{attrs:{id:"color-label"}},[e._v("Color")]),t("span")])}];const it={name:"categories",components:{ShapeComponent:m,Category:st,AddIcon:U},data(){return{errors:[],vectors:[],colors:[],categoryList:[],categoryTemplate:{shape:"",name:"",color:""}}},watch:{categoryList:{handler(e){this.categoryList=e},deep:!0}},methods:{checkForm(){this.errors=[];let e=new Set;for(let a=0;a<this.categoryList.length;a++)e.add(this.categoryList[a].name);e.size!==this.categoryList.length&&this.errors.push("Categories must be unique.")},addCategoryFields(){this.categoryList.push(this.unbind(n.getters.templateCategory))},unbind(e){return JSON.parse(JSON.stringify(e))},saveCategories(){this.checkForm(),!this.errors.length&&(v.$emit("updateCategories",this.categoryList),n.commit("updateCategories",this.categoryList),this.$parent.toggleKey())},removeCategory(e){let a=-1;for(let t=0;t<this.categoryList.length;t++)if(this.categoryList[t].id===e){a=t;break}a>-1&&this.categoryList.splice(a,1)}},mounted(){this.categoryList=this.unbind(n.getters.categories),this.categoryList.length||this.addCategoryFields()}},T={};var nt=o(it,at,rt,!1,ot,null,null,null);function ot(e){for(let a in T)this[a]=T[a]}var lt=function(){return nt.exports}();const ct={name:"BarChart",extends:J,mixins:[W.reactiveProp],watch:{stats(){this.$parent.fillChartData()},chartData:function(){this.renderChart(this.chartData,this.options)}},computed:{stats(){return this.$store.getters.stats}},data(){return{options:{legend:{position:"bottom"},onClick:this.handleClick,animation:{duration:0},responsive:!0,maintainAspectRatio:!1,barPercentage:1,categoryPercentage:1,scales:{xAxes:[{display:!0,stacked:!0,ticks:{autoSkipPadding:2,beginAtZero:!0},barThickness:2,gridLines:{display:!1}}],yAxes:[{display:!1,stacked:!0,ticks:{beginAtZero:!0},borderColor:"#ffffff",gridLines:{display:!1}}]}}}},methods:{handleClick(e,a){if(a.length){let t=a[0]._index,s=this.chartData.labels[t];v.$emit("goToYear",s)}}},beforeMount(){this.renderChart(this.chartData,this.options)}};let dt,ut;const S={};var ht=o(ct,dt,ut,!1,pt,null,null,null);function pt(e){for(let a in S)this[a]=S[a]}var vt=function(){return ht.exports}(),_t=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",{staticClass:"chart-container"},[t("h6",[e._v("Timeline overview")]),t("div",{staticClass:"chart"},[t("bar-chart",{attrs:{chartData:e.chartData,options:"options",width:100,height:150}})],1),t("p",{staticClass:"small"},[e._v("Click on chart to travel to date")])])},mt=[];const gt={name:"Minimap",components:{BarChart:vt},data(){return{chartData:{labels:[],datasets:[{label:"Cases",backgroundColor:"#f87979",data:[]},{label:"Events",backgroundColor:"#3d5b96",data:[]}]}}},methods:{fillChartData(){let e=this.$store.getters.firstYear?this.$store.getters.firstYear:1900,a=this.$store.getters.lastYear?this.$store.getters.lastYear:2e3;this.chartData={labels:Array.from(new Array(a+1-e),(t,s)=>e+s),datasets:[{label:"Cases",pointRadius:0,backgroundColor:"#f87979",tension:.1,borderWidth:0,data:this.$store.getters.stats[0]},{label:"Events",pointRadius:0,backgroundColor:"#000000",tension:.1,borderWidth:0,data:this.$store.getters.stats[1]}]}}},mounted(){this.fillChartData()}},R={};var ft=o(gt,_t,mt,!1,Ct,null,null,null);function Ct(e){for(let a in R)this[a]=R[a]}var yt=function(){return ft.exports}(),bt=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("svg",e._g({staticClass:"feather feather-arrow-left-circle",attrs:{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}},e.$listeners),[t("circle",{attrs:{cx:"12",cy:"12",r:"10"}}),t("polyline",{attrs:{points:"12 8 8 12 12 16"}}),t("line",{attrs:{x1:"16",y1:"12",x2:"8",y2:"12"}})])},wt={render:bt},kt=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",{staticClass:"sidebar",attrs:{id:"timeline-meta"}},[t("div",{staticClass:"sidebar-content text-center"},[t("div",{staticClass:"small font-italic"},[t("router-link",{attrs:{to:"/"}},[t("arrow-left-circle")],1),e._v(" Built using Chronolawgic: a legal timeline tool ")],1),t("minimap"),t("br"),t("a",{staticClass:"btn btn-primary btn-download",on:{click:function(s){return e.download()}}},[e._v("Download timeline JSON "),t("download-icon")],1),this.$store.state.isAuthor&&this.id===this.missingCases.id&&this.missingCases.cases?t("div",{staticClass:"h2o-error-container"},[t("b",[e._v("Please be sure to double-check the imported cases for accuracy.")]),t("br"),t("b",[e._v("We couldn't find some cases. This can happen if the citation is wrong or is outside of the bounds of CAP data.")]),t("br"),e._v(" You may need to add these by hand: "),t("br"),t("br"),t("ul",e._l(this.missingCases.cases,function(s,r){return t("li",{key:r},[t("a",{attrs:{href:"https://opencasebook.org"+s.original_url}},[t("b",[e._v(e._s(s.name))])]),e._v("\xA0 "),t("i",[e._v(e._s(s.citations[0]))])])}),0)]):e._e(),this.$store.state.isAuthor?e._e():t("div",{staticClass:"disclaimer mt-4 pl-2 pr-2"},[e._v(" Note: timelines are user generated and are not reviewed by the Caselaw Access Project. "),t("br"),t("a",{attrs:{href:this.$store.state.urls.chronolawgic}},[e._v("Create your own timeline! ")]),t("br"),t("br"),e._v(" To let us know about inappropriate content, "),t("a",{attrs:{href:this.$store.state.urls.contact}},[e._v("click here")]),e._v(". ")])],1)])},$t=[];const Et={name:"Sidebar",components:{Minimap:yt,ArrowLeftCircle:wt,DownloadIcon:z},computed:{missingCases(){return this.$store.getters.missingCases},id(){return this.$store.getters.id}},watch:{missingCases(){this.$store.getters.missingCases},id(){this.$store.getters.id}},methods:{download(){let e=this.$store.getters.timeline,a=encodeURIComponent(e.title+".json"),t=document.createElement("a");t.setAttribute("href","data:application/json;charset=utf-8,"+encodeURIComponent(JSON.stringify(e))),t.setAttribute("download",a),t.style.display="none",document.body.appendChild(t),t.click(),document.body.removeChild(t)}}},O={};var xt=o(Et,kt,$t,!1,Mt,null,null,null);function Mt(e){for(let a in O)this[a]=O[a]}var Tt=function(){return xt.exports}(),St=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("svg",e._g({staticClass:"feather feather-chevron-right",attrs:{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}},e.$listeners),[t("polyline",{attrs:{points:"9 18 15 12 9 6"}})])},Rt={render:St},Ot=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("main",{ref:"main-app-container",class:{"mobile-event-expanded":e.$store.getters.mobileEventsExpanded},attrs:{id:"main-app"},on:{keyup:function(s){return!s.type.indexOf("key")&&e._k(s.keyCode,"esc",27,s.key,["Esc","Escape"])?null:e.handleEscape.apply(null,arguments)}}},[t("div",{staticClass:"container-full"},[t("div",{staticClass:"row"},[t("sidebar",{class:{expanded:e.sidebarShown}}),t("div",{class:{expanded:!e.sidebarShown},attrs:{id:"timeline"}},[t("div",{staticClass:"top-menu"},[t("button",{staticClass:"sidebar-toggle",class:{sidebar:e.sidebarShown},attrs:{role:"\u201Dbutton\u201D"},on:{click:function(s){e.sidebarShown=!e.sidebarShown}}},[t("chevron-right")],1),t("header",{class:{"header-section":!0,title:!0,expanded:e.headerExpanded}},[t("h4",{attrs:{id:"timeline-title"},on:{click:function(s){return e.toggleHeader()}}},[e._v(e._s(e.$store.state.title))]),t("div",{attrs:{id:"timeline-author"}},[e._v("By "),t("span",{staticClass:"cap-user"},[e._v("CAP User")]),e._v(" "+e._s(e.$store.state.author))]),e.$store.state.description?t("div",{attrs:{id:"timeline-description"},domProps:{textContent:e._s(e.$store.state.description)},on:{click:function(s){return e.toggleHeader()}}}):e._e(),!this.$store.state.isAuthor&&this.$store.getters.isMobile&&this.headerExpanded?t("div",{staticClass:"disclaimer mt-2 p-1",on:{click:function(s){return e.toggleHeader()}}},[t("hr"),e._v(" Note: timelines are user generated and are not reviewed by the Caselaw Access Project. "),t("br"),t("a",{attrs:{href:this.$store.state.urls.chronolawgic}},[e._v("Create your own timeline! ")]),t("br"),t("br"),e._v(" To let us know about inappropriate content, "),t("a",{attrs:{href:this.$store.state.urls.contact}},[e._v("click here")]),e._v(". ")]):e._e()]),t("div",{staticClass:"header-section years"}),t("div",{class:{"header-section":!0,"zoom-section":!0,expanded:e.headerExpanded}},[t("div",{attrs:{id:"zoom-button-container"}},[t("ul",{staticClass:"inline-list toggles"},[e.$store.state.isAuthor||e.$store.state.categories&&e.$store.state.categories.length?t("li",{staticClass:"list-inline-item key",class:{selected:e.keyShown},attrs:{"data-target":"#categories-modal"},on:{click:e.toggleKey}},[t("key-icon")],1):e._e(),t("li",{staticClass:"list-inline-item zoom-toggle zoom-in",class:{selectable:!e.$store.state.minimized},on:{click:function(s){return e.$store.commit("toggleMinimized")}}},[t("minimize-icon")],1),t("li",{staticClass:"list-inline-item zoom-toggle zoom-out",class:{selectable:e.$store.state.minimized},on:{click:function(s){return e.$store.commit("toggleMinimized")}}},[t("maximize-icon")],1)]),e.keyShown?t("categories"):e._e()],1)])]),t("div",{staticClass:"year labels"},[t("div",{staticClass:"incidental",on:{click:function(s){return e.$store.commit("unExpandMobileEvents")}}}),t("div",{staticClass:"year_scale"},[t("div",{staticClass:"label_assembly"},[e.$store.state.isAuthor?t("button",{staticClass:"btn btn-tertiary btn-add-case",attrs:{type:"button",id:"top-add-cases-button","data-toggle":"modal","data-target":"#add-case-modal"},on:{click:function(s){return e.openModal(null,"case")}}},[t("add-icon")],1):e._e(),t("h6",{attrs:{id:"caselaw-label"},on:{click:function(s){return e.$store.commit("unExpandMobileEvents")}}},[e._v("CASELAW")]),t("h6",{attrs:{id:"events-label"},on:{click:function(s){return e.$store.commit("expandMobileEvents")}}},[e._v("EVENTS")]),e.$store.state.isAuthor?t("button",{staticClass:"btn btn-tertiary btn-add-event",attrs:{type:"button",id:"top-add-events-button","data-toggle":"modal","data-target":"#add-event-modal"},on:{click:function(s){return e.openModal(null,"event")}}},[t("add-icon")],1):e._e()])]),t("div",{staticClass:"spans row",on:{click:function(s){return e.$store.commit("expandMobileEvents")}}})]),e._l(e.years,function(s,r){return t("year",{key:"year_"+r,attrs:{year_data:s,year_value:r}})}),e.$store.getters.empty==="empty"?t("div",{staticClass:"year welcome"},[e.$store.state.isAuthor&&!this.$store.getters.isMobile?t("div",{staticClass:"incidental"},[e._v(" Welcome to your brand new timeline. Start adding content by clicking on the plus sign next to Cases or Events. ")]):e.$store.state.isAuthor&&this.$store.getters.isMobile?t("div",{staticClass:"incidental"},[e._v(" Welcome to your brand new timeline. We have not yet developed authorship mode for mobile devices. Please let us know if you'd like us to prioritize it. ")]):t("div",{staticClass:"incidental"},[e._v("The author of this timeline has not yet added any cases or events.")]),t("div",{staticClass:"year_scale"}),t("div",{staticClass:"spans"})]):e._e()],2)],1)]),e.showCase?t("add-case-modal",{attrs:{"data-toggle":"modal","data-target":"#add-case-modal",modal:e.showCase,case:e.event,shown:e.showCase},on:{"update:modal":function(s){e.showCase=s}}}):e.showEvent?t("add-event-modal",{attrs:{"data-toggle":"modal","data-target":"#add-event-modal",modal:e.showEvent,event:e.event,shown:e.showEvent},on:{"update:modal":function(s){e.showEvent=s}}}):e._e(),e.showReadOnly?t("readonly-modal",{attrs:{"data-toggle":"modal","data-target":"#readonly-modal",modal:e.showReadOnly,event:e.event,shown:e.showReadOnly},on:{"update:modal":function(s){e.showReadOnly=s}}}):e._e()],1)},Lt=[];const Pt={name:"Timeline",components:{AddCaseModal:pe,AddEventModal:Ce,AddIcon:U,KeyIcon:te,ReadonlyModal:Ee,Year:Ze,MinimizeIcon:Z,MaximizeIcon:X,Categories:lt,Sidebar:Tt,ChevronRight:Rt},computed:{title(){return this.$store.state.title},stats(){return this.$store.getters.stats}},data(){return{headerExpanded:!1,checked:!1,showCase:!1,showEvent:!1,showReadOnly:!1,keyShown:!1,years:{},event:null,windowWidth:window.innerWidth,sidebarShown:!0}},watch:{"$store.state.title":function(){this.repopulateTimeline()},"$store.state.events":function(){this.repopulateTimeline()},"$store.state.cases":function(){this.repopulateTimeline()},windowWidth(e,a){this.widthToBreakpoint(e)!==this.widthToBreakpoint(a)&&this.$store.commit("setBreakPoint",this.widthToBreakpoint(e))}},methods:{check(){this.checked=!this.checked},onResize(){this.windowWidth=window.innerWidth},openModal(e,a){this.showEvent=!1,this.showCase=!1,this.showReadOnly=!1,this.event=null,e&&(this.event=JSON.parse(JSON.stringify(e))),this.$store.state.isAuthor&&!this.$store.getters.isMobile?(this.showEvent=a==="event",this.showCase=a==="case"):this.showReadOnly=!0},closeModal(){this.showEvent=!1,this.showCase=!1,this.showReadOnly=!1,this.event=null,v.$emit("closeModal")},widthToBreakpoint(e){switch(!0){case e<576:return"xs";case e<768:return"sm";case e<992:return"md";case e<11200:return"lg";default:return"xl"}},toggleHeader(){(this.$store.state.description||this.$store.state.title.length>25)&&(this.headerExpanded=!this.headerExpanded)},toggleKey(){this.keyShown=!this.keyShown},toggleSidebar(){this.sidebarShown=!this.sidebarShown},handleEscape(){this.closeModal()},repopulateTimeline(){this.years={};const e=this.$store.getters.firstYear,a=this.$store.getters.lastYear;this.years={};for(let t=e;t<=a;t++)this.$set(this.years,t,{case_list:[],event_list:Array(12).fill({}),firstYearNoNewItems:!1,involvesAnyItem:!1});for(let t=e;t<=a;t++){const s=this.$store.getters.eventByStartYear(t),r=this.$store.getters.casesByYear(t);if(this.$set(this.years[t],"case_list",r),r.length+s.length>0)this.$set(this.years[t],"involvesAnyItem",!0);else if(t>e){const i=this.$store.getters.eventByStartYear(t-1).length,l=this.$store.getters.casesByYear(t-1).length;this.$set(this.years[t],"firstYearNoNewItems",i+l>0)}s.length>0&&s.forEach(i=>{for(let l=0;l<12;l++)if(Object.keys(this.years[t].event_list[l]).length===0){let g=new Date(i.end_date).getUTCFullYear()-new Date(i.start_date).getUTCFullYear();for(let u=0;u<=g;u++)this.$set(this.years[t+u].event_list,l,i),this.$set(this.years[t+u],"involvesAnyItem",!0);return!1}})}}},beforeDestroy(){window.removeEventListener("resize",this.onResize)},created(){v.$on("openModal",(e,a)=>{this.openModal(e,a)})},mounted(){this.$nextTick(()=>{window.addEventListener("resize",this.onResize)}),this.$store.commit("setBreakPoint",this.widthToBreakpoint(this.windowWidth))}},L={};var jt=o(Pt,Ot,Lt,!1,Nt,"3af719da",null,null);function Nt(e){for(let a in L)this[a]=L[a]}var I=function(){return jt.exports}(),At=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("svg",e._g({staticClass:"feather feather-edit",attrs:{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}},e.$listeners),[t("path",{attrs:{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}}),t("path",{attrs:{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"}})])},Ut={render:At},Dt=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("svg",e._g({staticClass:"feather feather-save",attrs:{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}},e.$listeners),[t("path",{attrs:{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"}}),t("polyline",{attrs:{points:"17 21 17 13 7 13 7 21"}}),t("polyline",{attrs:{points:"7 3 7 8 15 8"}})])},qt={render:Dt},It=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("svg",e._g({staticClass:"feather feather-x-circle",attrs:{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}},e.$listeners),[t("circle",{attrs:{cx:"12",cy:"12",r:"10"}}),t("line",{attrs:{x1:"15",y1:"9",x2:"9",y2:"15"}}),t("line",{attrs:{x1:"9",y1:"9",x2:"15",y2:"15"}})])},Ft={render:It},Yt=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("svg",e._g({staticClass:"feather feather-trash-2",attrs:{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}},e.$listeners),[t("polyline",{attrs:{points:"3 6 5 6 21 6"}}),t("path",{attrs:{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"}}),t("line",{attrs:{x1:"10",y1:"11",x2:"10",y2:"17"}}),t("line",{attrs:{x1:"14",y1:"11",x2:"14",y2:"17"}})])},Bt={render:Yt},zt=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("main",{staticClass:"admin"},[e._m(0),this.$store.state.user.is_authenticated==="True"?t("section",{attrs:{id:"timeline"}},[this.$store.getters.availableTimelines.length?t("h6",{staticClass:"timelines-title"},[e._v("Add a new timeline")]):e._e(),this.$store.getters.availableTimelines.length?e._e():[t("p",{staticClass:"welcome"},[e._v(" Welcome to Chronolawgic, the Caselaw Access Project tool for creating caselaw-focused timelines. To create your first timeline, click on the plus sign in the middle of the rectangle below, then click on the "),t("span",{staticClass:"inline-icon"},[t("edit-icon")],1),e._v(" symbol to set a title and description. ")])],t("div",{staticClass:"add-timeline"},[t("button",{staticClass:"create-blank btn btn-primary btn-highlight",attrs:{type:"button"},on:{click:function(s){return e.$store.dispatch("requestCreateTimeline")}}},[e._v(" CREATE A TIMELINE ")]),t("br"),t("div",{staticClass:"h2o-import-container"},[e._m(1),t("input",{directives:[{name:"model",rawName:"v-model",value:e.h2oURL,expression:"h2oURL"}],staticClass:"form-control",attrs:{placeholder:"Copy paste opencasebook.org URL here"},domProps:{value:e.h2oURL},on:{input:function(s){s.target.composing||(e.h2oURL=s.target.value)}}}),t("label",{attrs:{for:"useOriginalUrls"}},[e._v(" Use original H2O URLs")]),e._v("\xA0 "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.useOriginalURLs,expression:"useOriginalURLs"}],attrs:{type:"checkbox",id:"useOriginalUrls",name:"useOriginalUrls",value:"Use Original URLs"},domProps:{checked:Array.isArray(e.useOriginalURLs)?e._i(e.useOriginalURLs,"Use Original URLs")>-1:e.useOriginalURLs},on:{change:function(s){var r=e.useOriginalURLs,i=s.target,l=!!i.checked;if(Array.isArray(r)){var g="Use Original URLs",u=e._i(r,g);i.checked?u<0&&(e.useOriginalURLs=r.concat([g])):u>-1&&(e.useOriginalURLs=r.slice(0,u).concat(r.slice(u+1)))}else e.useOriginalURLs=l}}}),t("br"),t("button",{staticClass:"btn btn-primary",attrs:{type:"submit"},on:{click:function(s){return s.stopPropagation(),e.addH2OTimeline.apply(null,arguments)}}},[e._v(" CREATE FROM H2O "),e.showLoading?t("span",{staticClass:"spinner-border spinner-border-sm",attrs:{role:"status","aria-hidden":"true"}}):e._e()]),e.showLoading?t("span",{staticClass:"sr-only",attrs:{id:"loading-focus",tabindex:"-1"}},[e._v("Loading")]):e._e()])]),this.$store.getters.availableTimelines.length?e._l(this.$store.getters.availableTimelines,function(s,r){return t("div",{key:r,staticClass:"timeline-assembly"},[t("nav",[t("div",{staticClass:"editcancel",attrs:{title:"edit"}},[Object.prototype.hasOwnProperty.call(e.editMode,s.id)?t("button",{staticClass:"btn btn-edit",on:{click:function(i){return e.toggleEdit(s)},keyup:function(i){return!i.type.indexOf("key")&&e._k(i.keyCode,"esc",27,i.key,["Esc","Escape"])?null:e.toggleEdit(s)}}},[t("cancel-icon")],1):t("button",{staticClass:"btn btn-edit",on:{click:function(i){return e.toggleEdit(s)}}},[t("edit-icon")],1)]),t("div",{staticClass:"delete",attrs:{title:"delete timeline"}},[Object.prototype.hasOwnProperty.call(e.editMode,s.id)&&!e.deletePromptMode?t("button",{staticClass:"btn btn-edit",on:{click:function(i){e.deletePromptMode=!0}}},[t("delete-icon")],1):e._e(),Object.prototype.hasOwnProperty.call(e.editMode,s.id)&&e.deletePromptMode?t("button",{staticClass:"btn btn-edit confirm",on:{click:function(i){return e.$store.dispatch("requestDeleteTimeline",s.id)}}},[e._v(" Really Delete? ")]):e._e()]),t("div",{staticClass:"save",attrs:{title:"save changes"}},[t("button",{staticClass:"btn btn-edit",on:{click:function(i){return e.saveEdit(s.id)}}},[Object.prototype.hasOwnProperty.call(e.editMode,s.id)?t("save-icon"):e._e()],1)])]),t("div",{staticClass:"timeline-card"},[t("div",{staticClass:"content"},[t("header",{staticClass:"title"},[Object.prototype.hasOwnProperty.call(e.editMode,s.id)?t("div",{staticClass:"title-edit"},[t("div",{staticClass:"label"},[e._v("Title")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.editMode[s.id].title,expression:"editMode[timeline.id].title"}],staticClass:"title-input title",attrs:{type:"text"},domProps:{value:e.editMode[s.id].title},on:{keyup:[function(i){return!i.type.indexOf("key")&&e._k(i.keyCode,"esc",27,i.key,["Esc","Escape"])?null:e.toggleEdit(s)},function(i){return!i.type.indexOf("key")&&e._k(i.keyCode,"enter",13,i.key,"Enter")?null:e.saveEdit(s.id)}],input:function(i){i.target.composing||e.$set(e.editMode[s.id],"title",i.target.value)}}})]):t("h3",[t("router-link",{attrs:{to:s.id.toString()},domProps:{textContent:e._s(s.title)}})],1)]),t("div",{class:{author:!0,editmode:Object.prototype.hasOwnProperty.call(e.editMode,s.id)}},[Object.prototype.hasOwnProperty.call(e.editMode,s.id)?t("div",{staticClass:"author-edit"},[t("div",{staticClass:"label"},[e._v("Author")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.editMode[s.id].author,expression:"editMode[timeline.id].author"}],staticClass:"author-input",attrs:{placeholder:"CAP User"},domProps:{value:e.editMode[s.id].author},on:{keyup:function(i){return!i.type.indexOf("key")&&e._k(i.keyCode,"esc",27,i.key,["Esc","Escape"])?null:e.toggleEdit(s)},input:function(i){i.target.composing||e.$set(e.editMode[s.id],"author",i.target.value)}}})]):t("p",[e._v(" Author: "),t("span",{staticClass:"cap-user"},[e._v("CAP User")]),e._v(" "+e._s(s.author)+" ")])]),t("div",{class:{description:!0,editmode:Object.prototype.hasOwnProperty.call(e.editMode,s.id)}},[Object.prototype.hasOwnProperty.call(e.editMode,s.id)?t("div",{staticClass:"description-edit"},[t("div",{staticClass:"label"},[e._v("Description")]),t("textarea",{directives:[{name:"model",rawName:"v-model",value:e.editMode[s.id].description,expression:"editMode[timeline.id].description"}],staticClass:"description-input",domProps:{value:e.editMode[s.id].description},on:{keyup:function(i){return!i.type.indexOf("key")&&e._k(i.keyCode,"esc",27,i.key,["Esc","Escape"])?null:e.toggleEdit(s)},input:function(i){i.target.composing||e.$set(e.editMode[s.id],"description",i.target.value)}}})]):t("p",{domProps:{textContent:e._s(s.description)}})])]),t("aside",[t("div",{staticClass:"stat"},[t("div",{staticClass:"label"},[e._v("Cases")]),t("div",{staticClass:"case_count value",domProps:{textContent:e._s(s.case_count)}})]),t("div",{staticClass:"stat"},[t("div",{staticClass:"label"},[e._v("Events")]),t("div",{staticClass:"event_count value",domProps:{textContent:e._s(s.event_count)}})])])])])}):e._e()],2):t("section",{staticClass:"not-logged-in"},[e._v(" Welcome! To create Chronolawgic timelines, you must "),t("a",{attrs:{href:"../../../user/login?next="+e.currentLocation}},[e._v("log in")]),e._v(" to your Caselaw Access Project account. For more information on Chronolawgic, "),t("a",{attrs:{href:"../../"}},[e._v("click here")]),e._v(". ")]),t("br")])},Ht=[function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",{staticClass:"top-menu"},[t("h2",[t("a",{attrs:{href:"../../"}},[e._v("Labs:")]),e._v(" Chronolawgic")]),t("h5",{staticClass:"subhead"},[e._v("A legal timeline tool.")])])},function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("span",[e._v("Or pre-populate a timeline from "),t("a",{attrs:{href:"https://opencasebook.org"}},[e._v("H2O")])])}];const Vt={name:"Admin",components:{EditIcon:Ut,SaveIcon:qt,CancelIcon:Ft,DeleteIcon:Bt},data(){return{editMode:{},timelines:{},h2oURL:"",useOriginalURLs:!1,showLoading:!1,currentLocation:"",deletePromptMode:!1}},methods:{toggleEdit(e){Object.prototype.hasOwnProperty.call(this.editMode,e.id)?this.$delete(this.editMode,e.id):(this.$set(this.editMode,e.id,{}),this.$set(this.editMode[e.id],"id",e.id),this.$set(this.editMode[e.id],"title",e.title),this.$set(this.editMode[e.id],"author",e.author),this.$set(this.editMode[e.id],"description",e.description)),this.deletePromptMode=!1},saveEdit(e){Object.prototype.hasOwnProperty.call(this.editMode,e)&&this.$store.dispatch("requestUpdateTimelineMetadata",this.editMode[e]).then(()=>{this.$delete(this.editMode,e),this.$store.dispatch("requestTimelineList"),this.deletePromptMode=!1})},addH2OTimeline(){let e={url:this.h2oURL,use_original_urls:this.useOriginalURLs};this.showLoading=!0,n.dispatch("requestCreateH2OTimeline",e).then(a=>{this.showLoading=!1,a.status==="ok"&&this.$store.commit("setMissingCases",{cases:a.missing_cases,id:a.id})})}},beforeMount(){this.currentLocation=window.location.toString()}},P={};var Jt=o(Vt,zt,Ht,!1,Wt,null,null,null);function Wt(e){for(let a in P)this[a]=P[a]}var F=function(){return Jt.exports}(),Kt=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("main",[e.$store.getters.requestStatus==="pending"?t("div",{attrs:{id:"loading"}}):e._e(),e.$store.getters.notificationMessage?t("div",[e.$store.getters.requestStatus!=="error"?t("div",{staticClass:"flash",attrs:{id:"success_msg"}},[e._v(" "+e._s(e.$store.getters.notificationMessage)+" ")]):e._e(),e.$store.getters.requestStatus==="error"?t("div",{staticClass:"flash",attrs:{id:"error_msg"}},[e._v(" "+e._s(e.$store.getters.notificationMessage)+" ")]):e._e()]):e._e(),t("router-view")],1)},Zt=[];const Gt={name:"Admin",components:{},created(){v.$on("closeModal",()=>{C(".modal-backdrop").remove(),C("body").removeClass("modal-open")})}},j={};var Xt=o(Gt,Kt,Zt,!1,Qt,null,null,null);function Qt(e){for(let a in j)this[a]=j[a]}var es=function(){return Xt.exports}();B(()=>import("./modulepreload-polyfill.b7f2da20.js"),[]);_.config.devtools=!0;_.config.productionTip=!1;_.use(N);const Y=new N({mode:"history",base:"labs/chronolawgic/timeline/",routes:[{path:"/",component:F,name:"admin"},{path:"/:timeline",component:I,name:"timeline"},{path:"*",redirect:"/"}]});Y.afterEach(e=>{e.name==="timeline"&&e.params.timeline&&n.dispatch("requestTimeline",e.params.timeline),e.name==="admin"&&n.dispatch("requestTimelineList")});new _({el:"#app",store:n,template:"<App/>",components:{App:es,Timeline:I,Admin:F},router:Y});
//# sourceMappingURL=labs-chronolawgic.551a466c.js.map
